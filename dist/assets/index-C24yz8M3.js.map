{"version":3,"file":"index-C24yz8M3.js","sources":["../../src/modules/sales/pages/opportunity/columns/history-opportunity.column.tsx","../../src/modules/sales/pages/opportunity/history-opportunity/table-historyOpportunity.tsx","../../src/modules/sales/pages/opportunity/history-opportunity/index.tsx"],"sourcesContent":["import { TableProps } from 'antd';\nimport dayjs from 'dayjs';\n\ntype ColumnsType<T> = TableProps<T>['columns'];\nexport const historyOpportunityColumns: ColumnsType<HistoryOpportunityType> = [\n  {\n    title: 'Người cập nhật',\n    dataIndex: 'applicationUser',\n    width: '14%',\n  },\n  {\n    title: 'Mục tiêu',\n    dataIndex: 'goal',\n    width: '14%',\n  },\n  {\n    title: 'Hoạt động',\n    dataIndex: 'activity',\n  },\n  {\n    title: 'Thời điểm',\n    dataIndex: 'time',\n    render: (value) => dayjs(value).format('DD/MM/YYYY'),\n  },\n  {\n    title: 'Kết quả',\n    dataIndex: 'result',\n  },\n];\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { TableCustom } from '@/components/table';\nimport { CustomIcon } from '@/components/icons';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { Button, Space } from 'antd';\nimport { LocaleFormatter } from '@/components/locale-formatter';\nimport { getTenant } from '@/utils/common';\nimport { useModalOpportunity } from '@/modules/sales/components/modals/opportunity';\nimport { ModalOpportunityType } from '@/modules/sales/enum/opportunity.enum';\nimport { useEffect } from 'react';\nimport { Pagination } from '@/constants/pagination';\nimport { useOpportunity } from '@/modules/sales/services/opportunity.service';\nimport { useRootSelector } from '@/hooks/selector.hook';\nimport { useWatchLoading } from '@/hooks/loading.hook';\nimport { historyOpportunityColumns } from '../columns/history-opportunity.column';\n\nexport function TableHistoryOpportunity() {\n  const navigate = useNavigate();\n  const tenant = getTenant();\n  const { openModal } = useModalOpportunity();\n  const { getAllHistoryOpportunity, getOpportunityById } = useOpportunity();\n  const { pagination, history, detail } = useRootSelector((state) => state.sale.opportunity);\n  const [loading] = useWatchLoading(['get-historyOpportunity', true]);\n  const { id: opportunityId } = useParams();\n\n  const handleTableChange = (page: number) => {\n    getAllHistoryOpportunity({\n      pageIndex: page,\n      pageSize: Pagination.PAGESIZE,\n    });\n  };\n\n  console.log({ history });\n\n  useEffect(() => {\n    getAllHistoryOpportunity({\n      pageIndex: Pagination.PAGEINDEX,\n      pageSize: Pagination.PAGESIZE,\n    });\n    getOpportunityById(opportunityId!);\n  }, [getAllHistoryOpportunity, getOpportunityById, opportunityId]);\n\n  return (\n    <div css={rootStyle}>\n      <div css={containerStyle}>\n        <h3 css={titleStyle}>Cập nhật cơ hội</h3>\n        <Space direction=\"vertical\">\n          <Button css={closeStyle} onClick={() => navigate(`/sales/opportunity?tenant=${tenant}`)}>\n            <CustomIcon color=\"rgba(0, 0, 0, 1)\" width={16} height={16} type=\"close\" />\n            <LocaleFormatter id=\"title.exit\" />\n          </Button>\n          <Button\n            onClick={() => openModal(ModalOpportunityType.CreateHistoryOpportunity, detail)}\n            type=\"primary\"\n            css={addBtnStyle}\n            iconPosition=\"start\"\n            size=\"large\"\n          >\n            <CustomIcon color=\"#fff\" width={16} height={16} type=\"circle-plus\" />{' '}\n            <span>Thêm cập nhật</span>\n          </Button>\n        </Space>\n        <TableCustom\n          css={tableStyle}\n          columns={historyOpportunityColumns}\n          dataSource={history}\n          loading={loading}\n          rowKey={(record) => record.id}\n          onTableChange={(page) => handleTableChange(page)}\n          pagination={{\n            current: pagination?.pageIndex,\n            pageSize: Pagination.PAGESIZE,\n            total: pagination?.totalRecords,\n            position: ['bottomCenter'],\n          }}\n          scroll={{ x: 1200 }}\n        />\n      </div>\n    </div>\n  );\n}\n\nconst rootStyle = css`\n  display: flex;\n  justify-content: center;\n  margin: 4rem 0;\n`;\n\nconst containerStyle = css`\n  max-width: 1200px;\n  position: relative;\n`;\n\nconst titleStyle = css`\n  font-size: 2.4rem;\n  line-height: 2.6rem;\n  font-weight: 500;\n`;\n\nconst tableStyle = css`\n  margin-top: 6rem;\n`;\n\nconst addBtnStyle = css`\n  position: absolute;\n  right: 0;\n  top: 5.4rem;\n  background: #0070b8;\n  display: flex;\n  align-items: center;\n  gap: 0.2rem;\n  &:hover {\n    background: #0070b8 !important;\n    opacity: 0.9;\n  }\n`;\n\nconst closeStyle = css`\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  position: absolute;\n  right: 0;\n  top: 0;\n  &:hover {\n    svg {\n      path {\n        fill: #4096ff;\n      }\n    }\n  }\n`;\n","import { ModalOpportunityProvider } from '@/modules/sales/components/modals/opportunity';\nimport { TableHistoryOpportunity } from './table-historyOpportunity';\n\nexport default function HistoryOpportunityPage() {\n  return (\n    <ModalOpportunityProvider>\n      <TableHistoryOpportunity />\n    </ModalOpportunityProvider>\n  );\n}\n"],"names":["historyOpportunityColumns","title","dataIndex","width","render","dayjs","value","format","TableHistoryOpportunity","navigate","useNavigate","tenant","getAllHistoryOpportunity","getOpportunityById","openModal","opportunityId","handleTableChange","page","pageIndex","detail","console","history","Pagination","PAGESIZE","useEffect","titleStyle","containerStyle","PAGEINDEX","jsxs","Button","closeStyle","jsx","CustomIcon","totalRecords","position","process","NODE_ENV","addBtnStyle","_EMOTION_STRINGIFIED_CSS_ERROR__","TableCustom","tableStyle","loading","rootStyle","styles","map","HistoryOpportunityPage","ModalOpportunityProvider"],"mappings":"uWAIO,MAAMA,EAAiE,CAC5E,CACEC,MAAO,iBACPC,UAAW,kBACXC,MAAO,KACT,EACA,CACEF,MAAO,WACPC,UAAW,OACXC,MAAO,KACT,EACA,CACEF,MAAO,YACPC,UAAW,UACb,EACA,CACED,MAAO,YACPC,UAAW,OACXE,OAAmBC,GAAAA,EAAMC,CAAK,EAAEC,OAAO,YAAY,CACrD,EACA,CACEN,MAAO,UACPC,UAAW,QACb,CAAC,ECdH,SAAgCM,GAAA,CAEhC,MAAAC,EAA0CC,IAEnCD,MACCA,CACAE,UAAAA,OAAmB,CACnB,yBAAAC,EAAAA,mBAAAA,GAAAC,EAAAA,EAAA,CAAEC,WAAAA,EAAAA,QAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAAA,GAAAA,EAAAA,KAAAA,WAAAA,EAAAA,CAAAA,CAAAA,EAAAA,EAAAA,CAAAA,yBAAAA,EAAAA,CAAAA,EAAkC,CACpC,GAAAC,GAAAA,EAAAA,EAAAC,EAAAC,GAAA,CAA4BJ,EAAAA,CAAsC,UAAAI,EAClEC,SAAAD,EAAAA,QAAAA,CAAAA,CAAAA,EAAuBE,eAAAA,IAAAA,CAC7BC,QAAAA,CAAAA,CAAcC,mBACFN,EAAAA,CAA4B,UAAAO,EAAA,UAElCN,WAAoBA,QAAAA,CAAAA,EACCH,EAAAE,CAAA,CACZE,EAAAA,CAAAA,EACUM,EAAAA,CAAAA,CAAAA,IACtBV,MAAAA,CAGHO,IAAcC,EAEdG,WAAgBC,MAAAA,CACW,IAAAC,mBACDC,OAEvB,SAAA,iBAAA,CACDd,EAAAA,EAAAA,EAAAA,sBAWM,SAAA,CAAAe,EAAAC,GAAA,IAAAC,6CAEEnB,CAAA,EAAA,EAMC,SAAA,CAAAoB,EAAAC,EAAA,CAAqE,MAAA,mCAiBhEd,QAAKK,OAAAA,GAAOU,EAAAA,EAAAA,CAG1BC,GAAA,YAAA,CAIWC,CAAAA,CAAAA,CAAAA,EAAAA,EAAAA,EAAAA,CAAAC,QAAAA,IAAAA,EAAAA,EAAAA,yBAAAA,CAAAA,EAAA,KAAA,UAAA,IAAAC,EAAAC,aAAAA,QAAAA,KAAAA,QAAAA,SAAAA,CAAAA,EAAAA,EAAAA,CAAAA,MAAAA,OAAAA,MAAAA,GAAAA,OAAAA,GAAAA,KAAAA,aAAAA,CAAAA,EAAAA,IAAAA,EAAAA,OAAAA,CAAAA,SAAAA,eAAAA,CAMKH,CAAAA,CAAAA,CAAA,CAAA,CAAA,CAAA,EAAAJ,EAAAQ,EAAA,CAAA,IAAAC,EAAA,QAAAxC,EAAA,WAAAqB,EAAA,QAAAoB,EAAAH,UAAAA,EAAAA,GAAA,cAAArB,GAAAD,EAAAC,CAAA,EAKJkB,WAAAA,CAAAA,QAAAA,GAAAA,YAAAA,EAAAA,UAAAA,SAAAA,EAAAA,SAAAA,MAAAA,GAAAA,YAAAA,EAAAA,aAAAA,SAAAA,CAAAA,cAAAA,CAAAA,EAAAA,OAAAA,CAAAA,EAAAA,IAAAA,CAAAA,CAAAA,CAAAA,CAAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAAO,EAAA,CAAAC,KAAA,SAAAC,OAAA,mDAAA,EAMAlB,EAAA,CAAAiB,KAAA,UAAAC,OAAA,oCAAA,EAICnB,EAAA,CAAAkB,KAAA,UAAAC,OAAA,qDAAA,wWCrGjB,SAAwBC,GAAyB,CAC/C,OACGd,EAAAe,EAAA,CACC,SAACf,EAAAvB,EAAA,CAAA,CAAuB,CAC1B,CAAA,CAEJ"}