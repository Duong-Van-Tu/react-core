import{C as R}from"./index-DGwjM0Al.js";import{e as z,f as B,g as j,r as y,i as b,ay as E,az as U,aA as G,u as O,b as F,j as $,c as f}from"./index-D7kYuqtd.js";import{R as T}from"./DownloadOutlined-D0GEP7Fr.js";const N=()=>{const l=z(""),a=B(),h=j(),p=y.useCallback(async({textSearch:s,tenant:t,roleType:r,roleId:c,time:u})=>{const g={TextSearch:s,RoleType:r,RoleId:c,Time:`1-1-${u}`,tenant:t},d=b(g),{data:e,succeeded:n}=await a(()=>l.get(`/SaleKit/get-all?${d}`),{loadingKey:"get-sale-kit"});n&&h(E({data:e}))},[a,l]),i=y.useCallback(async({textSearch:s,tenant:t,roleType:r,roleId:c})=>{const g=b({TextSearch:s,RoleType:r,RoleId:c,tenant:t}),d=await a(()=>l.get(`/ApplicationRoleSaleKit/get-all?${g}`),{loadingKey:"get-sale-kit-role"});if(d){const{data:e,succeeded:n}=d;n&&h(U({data:e}))}},[a,l]),C=y.useCallback(async({tenant:s,files:t})=>{const c=b({tenant:s});await a(()=>l.post(`/SaleKit/add-document?${c}`,t),{loadingKey:"add-sale-kit"})&&p({})},[l,a]),v=y.useCallback(async({tenant:s,ids:t,applicationUserId:r})=>{const u=b({tenant:s});await a(()=>l.del(`/SaleKit/delete-by-ids/${t}/${r}?${u}`),{loadingKey:"delete-sale-kit"})&&p({})},[l,a]),q=y.useCallback(async({tenant:s,dataUpdate:t})=>{const c=b({tenant:s});await a(()=>l.put(`/ApplicationRoleSaleKit/update?${c}`,t),{loadingKey:"update-sale-kit-with-role"})},[l,a]),K=y.useCallback(async({textSearch:s,tenant:t,roleType:r})=>{const u=b({TextSearch:s,RoleType:r,tenant:t}),{data:g,succeeded:d}=await a(()=>l.get(`/ApplicationRoles/get-all?${u}`),{loadingKey:"get-all-role"});d&&h(G({data:g}))},[a,l]),S=y.useCallback(async({id:s,tenant:t})=>{const c=b({id:s,tenant:t});return await a(()=>l.get(`/SaleKit/download-document?${c}`),{loadingKey:"download-sale-kit"})},[a,l]);return{getAllSaleKit:p,downLoadDocument:S,getAllRoleInSaleKit:K,getAllSaleKitRole:i,updateSaleKitWithRole:q,deleteSaleKit:v,addSaleKit:C}},Z=R.Group,H=({isAdmin:l,checkedList:a,setCheckedList:h,data:p,dataWithRole:i,downLoadDocument:C})=>{const{formatMessage:v}=O(),{updateSaleKitWithRole:q}=N(),K=F(e=>e.auth.user),[S,s]=y.useState([]);y.useEffect(()=>{if(p){const e=p==null?void 0:p.map(n=>({value:n.id,label:n.name}));s(e);return}if(i){const e=[],n=i==null?void 0:i.map(o=>(o.access&&e.push(o.id),{value:o.id,label:o.fileName}));h(e),s(n)}},[p,i]);const t=S.length===a.length,r=a.length>0&&a.length<S.length,c=async e=>{if(i&&i.length>0){const n=i.map(o=>e.includes(o.id)?{...o,access:!0}:{...o,access:!1});await q({dataUpdate:{data:n,lastModifiedApplicationUserId:K==null?void 0:K.id}})}h(e)},u=e=>{h(e.target.checked?S.map(n=>n.value):[])},g=(e,n)=>{for(var o=e.replace(/[^A-Za-z0-9\+\/]/g,""),x=o.length,k=x*3+1>>2,A=new Uint8Array(k),m,D,w=0,L=0,P=0;P<x;P++)if(D=P&3,w|=parseInt(o.charAt(P),64)<<18-6*D,D===3||x-P===1){for(m=0;m<3&&L<k;m++,w>>=8)A[L++]=w>>>16;w=0}return A},d=async(e,n)=>{if(!i){const o=await C({id:e}),x=g(o.split(",")[1]),k=new Blob([x],{type:"application/octet-stream"}),A=URL.createObjectURL(k),m=document.createElement("a");m.href=A,m.download=n,document.body.appendChild(m),m.click(),document.body.removeChild(m)}};return $("div",{style:{margin:"18px 0"},children:[l&&f(R,{indeterminate:r,onChange:u,checked:t,style:{marginBottom:"16px"},children:f("p",{style:{fontSize:"16px",color:"#8993A4"},children:v({id:"table.column.saleKit.selectAll"})})}),l?f(Z,{style:{display:"flex",flexDirection:"column",gap:"32px"},value:a,onChange:c,children:S.map(e=>f(R,{value:e.value,children:$("a",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"18px",textDecoration:"underline"},href:"#",onClick:()=>d(e.value,e.label),children:[f(T,{}),e.label]})},e.value))}):f("div",{style:{display:"flex",flexDirection:"column",gap:"32px"},children:S.map(e=>f("span",{children:$("a",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"18px",textDecoration:"underline"},href:"#",onClick:()=>d(e.value,e.label),children:[f(T,{}),e.label]})},e.value))})]})},V=H;export{V as L,N as u};
//# sourceMappingURL=list-sale-kit-en2DMGdO.js.map
