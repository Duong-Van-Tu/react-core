import{e as he,f as fe,g as ae,h as ne,b as X,r as d,i as ye,A as be,P as z,E as Se,k as R,F as ve,G as M,H as Pe,I as Ie,J as we,u as L,j as o,c as e,S as Be,t as j,B as w,R as E,q as k,a as Z,v as Ce,w as Y,C as ee,D as ke,y as Ee,z as xe,T as Te}from"./index-D7kYuqtd.js";import{T as qe}from"./table-CK0VyuD-.js";import{L as P}from"./locale-formatter-FZ-3y9Y2.js";import{M as ze}from"./index-DbvvMLWa.js";import{F as h}from"./index-Cxldnjy_.js";import{T as A}from"./index-Dnrrwy9u.js";import{u as N}from"./loading.hook-B4xO64Zi.js";import{d as Ae}from"./dayjs.min-SzvlDAgD.js";import{R as B}from"./role.enum-2GZE6esB.js";import{a as T}from"./status.enum-khnHdRij.js";import{M as se}from"./message-CTVHhzE_.js";import{I as V}from"./index-DAOf7p35.js";import{a as I}from"./modal.enum-Dk0fWDyJ.js";import{S as Ue}from"./search-8bG-27XG.js";import"./index-DGwjM0Al.js";import"./index-DMzhYhmi.js";import"./index-BuPIgzdn.js";import"./ExclamationCircleFilled-Bz7bDzj1.js";import"./InfoCircleFilled-CK2dnJYF.js";const $=()=>{const i=he(""),t=fe(),a=ae(),l=ne(),r=X(m=>m.auth.user),n=d.useCallback(async({pageIndex:m=z.PAGEINDEX,pageSize:p=z.PAGESIZE,textSearch:b,statusId:y,time:q=Ae().year().toString(),roleType:S=B.MySelf})=>{const K={PageIndex:m.toString(),PageSize:p.toString(),UserId:r==null?void 0:r.id,RoleId:r==null?void 0:r.applicationRoles[0].id,StatusId:y,Time:`1-1-${q}`,TextSearch:b,RoleType:S,tenant:l},G=ye(K),{data:oe,succeeded:de}=await t(()=>i.post(`/Benefit/get-list-with-pagination?${G}`),{loadingKey:"get-benefit"});if(de){const{items:ce,totalRecords:me,pageIndex:ue,totalPages:ge,totalExtend:pe}=oe;a(be({data:ce,pagination:{pageIndex:ue,totalRecords:me,totalPages:ge},totalExtend:pe}))}},[t,i]),s=d.useCallback(async m=>{const{data:p,succeeded:b}=await t(()=>i.get(`/Benefit/get-by-id/${m}`),{loadingKey:"get-benefitDetail",messageKey:"benefitDetail-message"});b&&a(Se(p))},[t,i]),f=d.useCallback(async m=>{const p=R({...m}),{data:b,succeeded:y}=await t(()=>i.post(`/Benefit/add-or-update?tenant=${l}`,[{data:p}]),{loadingKey:"add-benefit",messageKey:"addBenefit-message"});return y?(a(ve(b[0])),y):!1},[i,t]),v=d.useCallback(async m=>{const{id:p,...b}=m,y=R(b),{data:q,succeeded:S}=await t(()=>i.post(`/Benefit/add-or-update?tenant=${l}`,[{id:p,data:y}]),{loadingKey:"edit-benefit",messageKey:"editBenefit-message"});return S?(a(M(q[0])),S):!1},[i,t]),c=d.useCallback(async m=>{const{id:p,...b}=m,y=R(b),{data:q,succeeded:S}=await t(()=>i.put(`/Benefit/update-total-benefit?tenant=${l}`,[{id:p,data:y}]),{loadingKey:"edit-totalBenefit",messageKey:"editBenefit-message"});return S?(a(M(q[0])),S):!1},[i,t]),u=d.useCallback(async m=>{const p=m.join(","),{succeeded:b}=await t(()=>i.del(`/Benefit/delete-by-ids/${p}/${r==null?void 0:r.id}?tenant=${l}`),{loadingKey:"delete-benefit"});return b?(a(Pe(m)),b):!1},[i,t]),g=d.useCallback(async m=>{const p=R(m),{data:b,succeeded:y}=await t(()=>i.post(`/BenefitStatus/add-or-update?tenant=${l}`,p),{loadingKey:"edit-statusBenefit"});return y?(a(M(b)),y):!1},[i,t]),C=d.useCallback(async m=>{const p=R(m),{data:b,succeeded:y}=await t(()=>i.put(`/Benefit/update-status-by-id?tenant=${l}`,p),{loadingKey:"edit-statusById"});return y?(a(M(b)),y):!1},[i,t]),x=d.useCallback(async m=>{var q;const p=R({id:m.id,applicationUserId:(q=m.applicationUser)==null?void 0:q.id,status:T.Confirm}),{data:b,succeeded:y}=await t(()=>i.put(`/Benefit/update-status-by-id?tenant=${l}`,p),{loadingKey:"refuseEdit-benefit"});return y?(a(M(b)),y):!1},[i,t]),U=d.useCallback(async()=>{const{data:m,succeeded:p}=await t(()=>i.get(`/BenefitStatus/get-all?tenant=${l}`),{loadingKey:"status-benefit"});p&&a(Ie(m))},[i,t]),F=d.useCallback(async()=>{const{data:m,succeeded:p}=await t(()=>i.get(`/Benefit/get-user?tenant=${l}`),{loadingKey:"getUsers-benefit"});p&&a(we(m))},[i,t]);return{getAllBenefit:n,addBenefit:f,updateBenefit:v,deleteBenefit:u,updateStatusBenefit:g,getAllStatusBenefit:U,getBenefitById:s,getUsersBenefit:F,refuseEditBenefit:x,updateTotalBenefit:c,updateStatusById:C}},Fe=({closeModal:i})=>{const{formatMessage:t}=L(),{getUsersBenefit:a,addBenefit:l}=$(),[r]=N(["add-benefit",!1]),[n]=h.useForm(),s=X(u=>u.sale.benefit.users),f=d.useMemo(()=>s==null?void 0:s.map(u=>({value:u.id,label:u.fullName})),[s])??[],v=async u=>{const{monthlySalary:g,targetSalary:C,totalSalary:x}=u,U={...u,monthlySalary:g.toString(),targetSalary:C.toString(),totalSalary:x.toString()};await l(U)&&(n.resetFields(),i())},c=()=>{i()};return d.useEffect(()=>{a()},[]),o(d.Fragment,{children:[e("h3",{css:$e,children:"Thêm đề xuất quyền lợi"}),o(h,{form:n,css:Ne,name:"add-privileges",onFinish:v,layout:"vertical",children:[e(h.Item,{label:e("span",{css:_,children:t({id:"form.input.addPrivileges.beneficiaryName"})}),name:"applicationUserId",rules:[{required:!0,message:t({id:"form.input.addPrivileges.require.beneficiaryName"})}],children:e(Be,{size:"large",placeholder:"Người hưởng quyền lợi",options:f})}),e(h.Item,{label:e("span",{css:_,children:t({id:"form.input.addPrivileges.baseSalary"})}),name:"monthlySalary",rules:[{required:!0,message:t({id:"form.input.addPrivileges.require.baseSalary"})}],children:e(A,{css:Q,size:"large",placeholder:t({id:"form.input.addPrivileges.placeholder.NETRevenue"})})}),e(h.Item,{label:e("span",{css:_,children:t({id:"form.input.addPrivileges.totalSalaryVariation"})}),name:"targetSalary",rules:[{required:!0,message:t({id:"form.input.addPrivileges.require.totalSalaryVariation"})}],children:e(A,{css:Q,size:"large",placeholder:t({id:"form.input.addPrivileges.placeholder.NETRevenue"})})}),e(h.Item,{label:e("span",{css:_,children:t({id:"form.input.addPrivileges.variesActualSalary"})}),name:"totalSalary",rules:[{required:!0,message:t({id:"form.input.addPrivileges.require.variesActualSalary"})}],children:e(A,{css:Q,size:"large",placeholder:t({id:"form.input.addPrivileges.placeholder.NETRevenue"})})}),e(E,{justify:"end",children:o(j,{children:[e(w,{onClick:c,children:"Huỷ"}),e(w,{loading:r,type:"primary",htmlType:"submit",children:"Xác nhận"})]})})]})]})},Ne={name:"1mnl6b",styles:".ant-form-item-required::before{display:none!important;}margin-top:2rem;padding:1rem"},$e={name:"x2l4rd",styles:"font-weight:500;font-size:2rem;line-height:2.2rem;margin-top:2rem"},_={name:"166bhmq",styles:"font-size:1.4rem;line-height:1.6rem;font-weight:500;color:#101828"},Q={name:"1d3w5wq",styles:"width:100%"},Re=({closeModal:i,data:t})=>{var l,r;let a;switch((l=t.benefitStatus)==null?void 0:l.code){case T.Updated:a="success";break;case T.Request:case T.Confirm:a="info";break;default:a="warning"}return o("div",{css:De,children:[e("h3",{css:Ke,children:"Báo cáo"}),o("div",{css:je,children:[o(E,{justify:"space-between",align:"bottom",children:[e(k,{children:e(P,{id:"title.employee.reportPrivileges.nameBenifitsProposer"})}),e(k,{children:(r=t.applicationUser)==null?void 0:r.fullName})]}),o(E,{justify:"space-between",align:"bottom",children:[e(k,{children:e(P,{id:"title.employee.reportPrivileges.baseSalary"})}),e(k,{children:t.monthlySalary})]}),o(E,{justify:"space-between",align:"bottom",children:[e(k,{children:e(P,{id:"title.employee.reportPrivileges.totalChangesTarget"})}),e(k,{children:t.targetSalary})]}),o(E,{justify:"space-between",align:"bottom",children:[e(k,{children:e(P,{id:"title.employee.reportPrivileges.actualSalaryFluctuates"})}),e(k,{children:t.totalSalary})]}),o(E,{justify:"space-between",align:"bottom",children:[e(k,{children:e(P,{id:"title.status"})}),e(k,{children:t.benefitStatus?e(se,{hasBackground:!0,type:a,children:t.benefitStatus.name}):""})]}),e(w,{css:Ge,type:"primary",onClick:()=>i(),children:"Xác nhận"})]})]})},De={name:"1dvcxr3",styles:"padding:1rem"},je={name:"fnbsfe",styles:"display:flex;flex-direction:column;gap:1.4rem;font-weight:500"},Ke={name:"tothlp",styles:"font-size:2rem;line-height:2.2rem;text-align:center;margin-bottom:2rem;font-weight:500"},Ge={name:"1729r8f",styles:"width:100%;margin-top:2rem"},Me=({closeModal:i,data:t})=>{const{formatMessage:a}=L(),{updateStatusById:l,refuseEditBenefit:r}=$(),{isSale:n,isSaleDirector:s}=Z(),[f]=h.useForm(),[v,c]=N(["edit-statusBenefit",!1],["refuseEdit-benefit",!1]),u=async x=>{var y;const{monthlySalary:U,targetSalary:F,totalSalary:m}=x,p={id:t.id,...x,monthlySalary:U.toString(),targetSalary:F.toString(),totalSalary:m.toString(),applicationUserId:(y=t.applicationUser)==null?void 0:y.id,status:n?T.Request:T.Updated};await l(p)&&(f.resetFields(),i())},g=async()=>{await r(t)&&(f.resetFields(),i())},C=()=>{i()};return o(d.Fragment,{children:[e("h3",{css:Xe,children:"Đề xuất chỉnh sửa quyền lợi"}),o(h,{form:f,css:Ve,name:"requestEdit-privileges",onFinish:u,layout:"vertical",children:[e(h.Item,{label:e("span",{css:D,children:a({id:"form.input.employeePrivileges.baseSalary"})}),children:e(V,{value:t.monthlySalary,size:"large",disabled:!0})}),o(E,{gutter:[20,0],children:[e(k,{span:12,children:e(h.Item,{label:e("span",{css:D,children:a({id:"form.input.employeePrivileges.totalChangesTarget"})}),children:e(V,{value:t.targetSalary,size:"large",disabled:!0})})}),e(k,{span:12,children:e(h.Item,{label:o("span",{css:D,children:[a({id:"form.input.employeePrivileges.actualSalaryFluctuates"}),e("br",{}),e("br",{})]}),children:e(V,{value:t.totalSalary,size:"large",disabled:!0})})})]}),e(h.Item,{label:e("span",{css:D,children:a({id:"form.input.employeePrivileges.baseSalaryEdit"})}),name:"monthlySalary",rules:[{required:!0,message:"Vui lòng nhập mức lương cố định hàng tháng muốn chỉnh sửa"}],children:e(A,{css:O,size:"large"})}),o(E,{gutter:[20,0],children:[e(k,{span:12,children:e(h.Item,{label:e("span",{css:D,children:a({id:"form.input.employeePrivileges.totalChangesTargetEdit"})}),name:"targetSalary",rules:[{required:!0,message:"Vui lòng nhập tổng quyền lợi biến động mục tiêu muốn chỉnh sửa"}],children:e(A,{css:O,size:"large"})})}),e(k,{span:12,children:e(h.Item,{label:e("span",{css:D,children:a({id:"form.input.employeePrivileges.actualSalaryFluctuatesEdit"})}),name:"totalSalary",rules:[{required:!0,message:"Vui lòng nhập Mức lương biến động thực tế muốn chỉnh sửa"}],children:e(A,{css:O,size:"large"})})})]}),e(E,{justify:"end",css:Le,children:o(j,{children:[e(w,{onClick:C,children:"Huỷ"}),s&&e(w,{loading:c,onClick:g,type:"primary",ghost:!0,children:"Từ chối chỉnh sửa"}),e(w,{loading:v,type:"primary",htmlType:"submit",children:"Xác nhận"})]})})]})]})},Ve={name:"1mnl6b",styles:".ant-form-item-required::before{display:none!important;}margin-top:2rem;padding:1rem"},D={name:"166bhmq",styles:"font-size:1.4rem;line-height:1.6rem;font-weight:500;color:#101828"},Xe={name:"x2l4rd",styles:"font-weight:500;font-size:2rem;line-height:2.2rem;margin-top:2rem"},Le={name:"akdqam",styles:"margin-top:1rem"},O={name:"1d3w5wq",styles:"width:100%"},_e=({closeModal:i,data:t})=>{var c;const{formatMessage:a}=L(),{getUsersBenefit:l,updateBenefit:r}=$(),[n]=N(["edit-benefit",!1]),[s]=h.useForm(),f=async u=>{var m;const{monthlySalary:g,targetSalary:C,totalSalary:x}=u,U={id:t.id,applicationUserId:(m=t.applicationUser)==null?void 0:m.id,monthlySalary:g.toString(),targetSalary:C.toString(),totalSalary:x.toString()};await r(U)&&(s.resetFields(),i())},v=()=>{i()};return d.useEffect(()=>{l()},[l]),d.useEffect(()=>{var u;s.setFieldsValue({...t,applicationUserId:(u=t.applicationUser)==null?void 0:u.fullName})},[t]),o(d.Fragment,{children:[e("h3",{css:Ze,children:"Chỉnh sửa quyền lợi"}),o(h,{form:s,css:He,name:"add-privileges",onFinish:f,layout:"vertical",children:[e(h.Item,{label:e("span",{css:H,children:a({id:"form.input.addPrivileges.beneficiaryName"})}),children:e(V,{value:(c=t.applicationUser)==null?void 0:c.fullName,disabled:!0,size:"large"})}),e(h.Item,{label:e("span",{css:H,children:a({id:"form.input.addPrivileges.baseSalary"})}),name:"monthlySalary",rules:[{required:!0,message:a({id:"form.input.addPrivileges.require.baseSalary"})}],children:e(A,{css:J,size:"large",placeholder:a({id:"form.input.addPrivileges.placeholder.NETRevenue"})})}),e(h.Item,{label:e("span",{css:H,children:a({id:"form.input.addPrivileges.totalSalaryVariation"})}),name:"targetSalary",rules:[{required:!0,message:a({id:"form.input.addPrivileges.require.totalSalaryVariation"})}],children:e(A,{css:J,size:"large",placeholder:a({id:"form.input.addPrivileges.placeholder.NETRevenue"})})}),e(h.Item,{label:e("span",{css:H,children:a({id:"form.input.addPrivileges.variesActualSalary"})}),name:"totalSalary",rules:[{required:!0,message:a({id:"form.input.addPrivileges.require.variesActualSalary"})}],children:e(A,{css:J,size:"large",placeholder:a({id:"form.input.addPrivileges.placeholder.NETRevenue"})})}),e(E,{justify:"end",children:o(j,{children:[e(w,{onClick:v,children:"Huỷ"}),e(w,{loading:n,type:"primary",htmlType:"submit",children:"Xác nhận"})]})})]})]})},He={name:"1mnl6b",styles:".ant-form-item-required::before{display:none!important;}margin-top:2rem;padding:1rem"},Ze={name:"x2l4rd",styles:"font-weight:500;font-size:2rem;line-height:2.2rem;margin-top:2rem"},H={name:"166bhmq",styles:"font-size:1.4rem;line-height:1.6rem;font-weight:500;color:#101828"},J={name:"1d3w5wq",styles:"width:100%"},Qe=({closeModal:i,benefitIds:t,data:a})=>{const{deleteBenefit:l,getAllBenefit:r}=$(),n=X(g=>{var C;return(C=g.sale.kpi.pagination)==null?void 0:C.pageIndex})??0,[s]=N(["delete-benefit",!1]),f=Ce(),c=new URLSearchParams(f.search).get("tab");return o("div",{css:Oe,children:[e("h3",{css:Je,children:"Đồng ý xoá quyền lợi đã chọn?"}),e(E,{justify:"center",children:o(j,{children:[e(w,{onClick:()=>i(),children:"Huỷ"}),e(w,{loading:s,type:"primary",danger:!0,onClick:async()=>{await l(a?[a.id]:t)&&(i(),t.length===z.PAGESIZE&&r({pageIndex:n-1||1,pageSize:z.PAGESIZE,roleType:c}))},children:"Xoá"})]})})]})},Oe={name:"mjs9a",styles:"margin-top:2rem;padding:0 2rem"},Je={name:"bmm6zl",styles:"font-size:1.8rem;line-height:2rem;text-align:center;margin-bottom:2.4rem;font-weight:500"},We=({closeModal:i,data:t})=>{var v;const{formatMessage:a}=L(),{updateTotalBenefit:l}=$(),[r]=N(["edit-totalBenefit",!1]),[n]=h.useForm(),s=async c=>{const{totalBenefit:u}=c,g={id:t.id,totalBenefit:u.toString()};await l(g)&&(n.resetFields(),i())},f=()=>{i()};return d.useEffect(()=>{var c;n.setFieldsValue({...t,applicationUserId:(c=t.applicationUser)==null?void 0:c.fullName})},[t]),o(d.Fragment,{children:[e("h3",{css:et,children:"Chỉnh sửa quyền lợi"}),o(h,{form:n,css:Ye,name:"add-privileges",onFinish:s,layout:"vertical",children:[e(h.Item,{label:e("span",{css:te,children:a({id:"form.input.addPrivileges.beneficiaryName"})}),children:e(V,{size:"large",value:(v=t.applicationUser)==null?void 0:v.fullName,disabled:!0})}),e(h.Item,{label:e("span",{css:te,children:"Tổng quyền lợi hiện tại"}),name:"totalBenefit",rules:[{required:!0,message:"Vui lòng nhập tổng quyền lợi!"}],children:e(A,{css:tt,size:"large",placeholder:"Nhập tổng quyền lợi"})}),e(E,{justify:"end",children:o(j,{children:[e(w,{onClick:f,children:"Huỷ"}),e(w,{loading:r,type:"primary",htmlType:"submit",children:"Xác nhận"})]})})]})]})},Ye={name:"1mnl6b",styles:".ant-form-item-required::before{display:none!important;}margin-top:2rem;padding:1rem"},et={name:"x2l4rd",styles:"font-weight:500;font-size:2rem;line-height:2.2rem;margin-top:2rem"},te={name:"166bhmq",styles:"font-size:1.4rem;line-height:1.6rem;font-weight:500;color:#101828"},tt={name:"1d3w5wq",styles:"width:100%"},it=({closeModal:i,data:t})=>{const{updateStatusById:a}=$(),[l]=N(["edit-statusBenefit",!1]);return o("div",{css:at,children:[e("h3",{css:nt,children:"Đồng ý chốt quyền lợi này"}),e(E,{justify:"center",children:o(j,{children:[e(w,{onClick:()=>i(),children:"Huỷ"}),e(w,{loading:l,type:"primary",onClick:async()=>{var s;await a({id:t.id,applicationUserId:(s=t.applicationUser)==null?void 0:s.id,status:T.Confirm})&&i()},children:"Xác nhận"})]})})]})},at={name:"mjs9a",styles:"margin-top:2rem;padding:0 2rem"},nt={name:"bmm6zl",styles:"font-size:1.8rem;line-height:2rem;text-align:center;margin-bottom:2.4rem;font-weight:500"},le=d.createContext(void 0),re=()=>{const i=d.useContext(le);if(!i)throw new Error("useModalPrivileges must be used within a ModalPrivilegesProvider");return i},st=({children:i})=>{const[t,a]=d.useState(),[l,r]=d.useState(!1),n=(f,v,c)=>{a({modalName:f,data:v,benefitIds:c}),r(!0)},s=()=>{a(void 0),r(!1)};return o(le.Provider,{value:{openModal:n,closeModal:s},children:[i,o(ze,{width:(t==null?void 0:t.modalName)===I.Delete||(t==null?void 0:t.modalName)===I.FinalizePrivileges?"38rem":(t==null?void 0:t.modalName)===I.Report?"45rem":"54rem",open:l,onCancel:s,footer:null,children:[(t==null?void 0:t.modalName)===I.Delete&&e(Qe,{closeModal:s,data:t.data,benefitIds:t.benefitIds}),(t==null?void 0:t.modalName)===I.SuggestedEdit&&e(Me,{closeModal:s,data:t.data}),(t==null?void 0:t.modalName)===I.Report&&e(Re,{closeModal:s,data:t.data}),(t==null?void 0:t.modalName)===I.AddPrivileges&&e(Fe,{closeModal:s}),(t==null?void 0:t.modalName)===I.EditPrivileges&&e(_e,{closeModal:s,data:t.data}),(t==null?void 0:t.modalName)===I.TotalPrivileges&&e(We,{closeModal:s,data:t.data}),(t==null?void 0:t.modalName)===I.FinalizePrivileges&&e(it,{closeModal:s,data:t.data})]})]})};function lt({data:i}){var c;const{openModal:t}=re(),{isAdmin:a,isSale:l}=Z(),{tab:r}=Y(),n=u=>{switch(u){case 1:t(I.EditPrivileges,i);break;case 3:t(I.SuggestedEdit,i);break;case 2:t(I.Report,i);break;case 4:t(I.Delete,i);break;case 5:t(I.TotalPrivileges,i);break;case 6:t(I.FinalizePrivileges,i);break}},s=d.useMemo(()=>r===B.Employee?[{key:1,label:e(P,{id:"dropdown.edit"}),onClick:()=>n(1)},{key:3,label:e(P,{id:"dropdown.privileges.suggestedEdit"}),onClick:()=>n(3)},{key:2,label:e(P,{id:"dropdown.report"}),onClick:()=>n(2)},{key:4,label:e(P,{id:"dropdown.delete"}),onClick:()=>n(4)}]:[],[]),f=d.useMemo(()=>r===B.Manager?[{key:1,label:e(P,{id:"dropdown.edit"}),onClick:()=>n(1)},{key:4,label:e(P,{id:"dropdown.delete"}),onClick:()=>n(4)}]:[{key:5,label:"Cập nhập tổng quyền lợi hiện tại",onClick:()=>n(5)}],[r]),v=d.useMemo(()=>{var u;return((u=i.benefitStatus)==null?void 0:u.code)===T.Updated?[{key:6,label:"Chốt",onClick:()=>n(6)},{key:2,label:e(P,{id:"dropdown.report"}),onClick:()=>n(2)}]:[{key:3,label:"Gửi yêu cầu chỉnh sửa",onClick:()=>n(3)},{key:2,label:e(P,{id:"dropdown.report"}),onClick:()=>n(2)}]},[(c=i.benefitStatus)==null?void 0:c.code]);return e(ke,{menu:{items:a?f:l?v:s},placement:"bottomRight",children:e(w,{css:rt,children:e(ee,{type:"three-dot",width:16,height:18})})})}const rt={name:"l2srbf",styles:"background:none;border:none;box-shadow:unset;padding:0"},ie=[{title:e(P,{id:"table.column.privileges.beneficiaryName"}),dataIndex:["applicationUser","fullName"]},{title:"Tổng quyền lợi hiện tại",dataIndex:"totalBenefit"},{title:e(P,{id:"table.column.privileges.fixedMonthlySalary"}),dataIndex:"monthlySalary"},{title:e(P,{id:"table.column.privileges.totalTargetVariableSalary"}),dataIndex:"targetSalary"},{title:e(P,{id:"table.column.privileges.totalSalary"}),dataIndex:"totalSalary"},{title:e(P,{id:"table.column.status"}),dataIndex:["benefitStatus","name"],align:"center",render:(i,t)=>{var l;let a;switch((l=t.benefitStatus)==null?void 0:l.code){case T.Updated:a="success";break;case T.Request:case T.Confirm:a="info";break;default:a="warning"}return t.benefitStatus?e(se,{hasBackground:!0,type:a,children:t.benefitStatus.name}):""}},{title:"",dataIndex:"calculationMethod",fixed:"right",width:"6%",render:(i,t)=>e(lt,{data:t})}],ot=[{title:"Tổng quyền lợi hiện tại",dataIndex:"totalBenefit"},{title:"Tổng mức lương mục tiêu",dataIndex:"targetSalary"},{title:"Mức lương cố định hàng tháng",dataIndex:"monthlySalary"},{title:e(P,{id:"table.column.privileges.totalSalary"}),dataIndex:"totalSalary"}];function W(){const{openModal:i}=re(),{getAllStatusBenefit:t,getAllBenefit:a}=$(),[l,r]=N(["get-benefit",!0],["status-benefit",!0]),{isSaleDirector:n,isAdmin:s,isSale:f}=Z(),{data:v,pagination:c,status:u}=X(S=>S.sale.benefit),{tab:g,textSearch:C,time:x,statusId:U}=Y(),[F,m]=d.useState(),p=d.useMemo(()=>{if(n&&g===B.MySelf)return ot;if(s&&g===B.Manager){const S=[...ie];return S.splice(5,1),S}return ie},[g,n]),b={onChange:(S,K)=>{m(K.map(G=>G.id))}},y=({textSearch:S,statusId:K,time:G})=>{a({pageIndex:(c==null?void 0:c.pageIndex)??z.PAGEINDEX,pageSize:z.PAGESIZE,textSearch:S,statusId:K,time:G,roleType:g})},q=S=>{a({pageIndex:S,pageSize:z.PAGESIZE,roleType:g,textSearch:C?decodeURI(C).replace(/\+/g," "):void 0,time:x,statusId:U})};return d.useEffect(()=>{a({pageIndex:z.PAGEINDEX,pageSize:z.PAGESIZE,roleType:g}),t()},[a,t,g]),o("div",{css:dt,children:[(g===B.Employee&&n||s)&&o(d.Fragment,{children:[o(w,{onClick:()=>i("Add Privileges"),type:"primary",css:ct,iconPosition:"start",size:"large",children:[e(ee,{color:"#fff",width:16,height:16,type:"circle-plus"}),e("span",{children:"Thêm Quyền lợi"})]}),e("div",{css:[mt,s&&gt,"",""],children:e(Ue,{onSearch:y,status:g===B.Manager?void 0:u,loadingStatus:r})}),e(w,{css:ut,onClick:()=>i(I.Delete,void 0,F),size:"middle",danger:!0,disabled:!F,children:"Xoá Quyền lợi đã chọn"})]}),e(qe,{css:[f&&pt,"",""],rowSelection:g===B.Employee||s?b:void 0,columns:p,dataSource:v,loading:l,rowKey:S=>S.id,onTableChange:S=>q(S),pagination:(n&&g===B.Employee||s)&&{current:c==null?void 0:c.pageIndex,pageSize:z.PAGESIZE,total:c==null?void 0:c.totalRecords,position:["bottomCenter"]},scroll:{x:g===B.MySelf?1200:1800}})]})}const dt={name:"bjn8wh",styles:"position:relative"},ct={name:"1vjzj34",styles:"position:absolute;right:0;top:-9rem;background:#0070b8;display:flex;align-items:center;gap:0.2rem;&:hover{background:#0070b8!important;opacity:0.9;}"},mt={name:"f2f29z",styles:"margin-top:2.6rem"},ut={name:"5bn9ws",styles:"margin:2.4rem 0 1.4rem 0"},gt={name:"nx0cbn",styles:"margin-bottom:2.6rem"},pt={name:"f2f29z",styles:"margin-top:2.6rem"};function $t(){const i=ae(),{formatMessage:t}=L(),a=Ee(),l=ne(),r=X(u=>{var g;return(g=u.sale.benefit.pagination)==null?void 0:g.totalRecords}),{isAdmin:n,isSaleDirector:s}=Z(),{tab:f}=Y(),v=[{key:n?B.Manager:B.MySelf,label:n?" Quyền lợi của giám đốc":t({id:"title.tab.privileges.my"}),children:e(W,{})},{key:B.Employee,label:t({id:"title.tab.privileges.employee"}),children:e(W,{})}],c=u=>{a(`?tab=${u}&tenant=${l}`)};return d.useEffect(()=>{f||a(`?tab=${n?B.Manager:B.MySelf}&tenant=${l}`)},[f]),d.useEffect(()=>{i(xe([{title:{vi_VN:"Sale",en_US:"Sale"}},{title:{vi_VN:"Cơ hội",en_US:"Privileges"}}]))},[i]),o(st,{children:[e("h3",{css:ft,children:t({id:"title.document.privileges"})}),o("div",{css:ht,children:[e("span",{children:t({id:"title.document.privileges"})}),e(ee,{width:8,height:8,type:"dot"}),o("span",{children:[r," ",t({id:"title.document.privileges"})]})]}),(n||s)&&e(Te,{activeKey:f,items:v,onChange:c}),!(n||s)&&e(W,{})]})}const ht={name:"19qu8x5",styles:"display:flex;align-items:center;margin-top:0.4rem;gap:4px;font-size:1.4rem"},ft={name:"156m3vd",styles:"font-size:1.8rem;line-height:2.3rem;font-weight:600"};export{$t as default};
//# sourceMappingURL=index-DelqkX9t.js.map
