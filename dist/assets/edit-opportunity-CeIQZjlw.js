import{u as S,aE as x,y as P,h as k,b as O,r as y,c as e,j as o,B as b,aK as W,R as l,q as s,aL as E,aJ as v}from"./index-D7kYuqtd.js";import{D as q}from"./index-DcquuWwD.js";import{F as t}from"./index-Cxldnjy_.js";import{I as n}from"./index-DAOf7p35.js";import{T as u}from"./index-Dnrrwy9u.js";import{s as j}from"./index-_Yt4mwVO.js";import{d as p}from"./dayjs.min-SzvlDAgD.js";import{L as F}from"./locale-formatter-FZ-3y9Y2.js";import{u as L}from"./opportunity.service-Z_MSTo0G.js";import{u as B}from"./loading.hook-B4xO64Zi.js";import{u as N}from"./message.hook-fAQPADwq.js";import"./ExclamationCircleFilled-Bz7bDzj1.js";import"./InfoCircleFilled-CK2dnJYF.js";function ae(){const{formatMessage:r}=S(),{updateOpportunity:I,getOpportunityById:h}=L(),{id:c}=x(),[M,C]=B(["edit-opportunity",!1],["get-opportunityDetail",!0]),[g]=t.useForm(),[f,Y]=j.useMessage(),{errors:z}=N("editOpportunity-message"),T=P(),w=k(),d=O(a=>a.sale.opportunity.detail),D=async a=>{const A={id:c,...a,estimatedMoney:a.estimatedMoney.toString(),budget:a.budget.toString(),commissionMoney:a.commissionMoney.toString(),estimatedTime:p(a.estimatedTime).format("DD/MM/YYYY"),lastTimeInteract:p(a.lastTimeInteract).format("DD/MM/YYYY")};await I(A)?f.success(v.UPDATE_SUCCESS):f.success(z[0])};return y.useEffect(()=>{c&&h(c)},[h,c]),y.useEffect(()=>{if(d){const a={...d,estimatedTime:p(d.estimatedTime),lastTimeInteract:p(d.lastTimeInteract)};g.setFieldsValue(a)}},[d]),e(E,{spinning:C,size:"large",children:o("div",{css:R,children:[Y,o(b,{css:U,onClick:()=>T(`/sales/opportunity?tenant=${w}`),children:[e(W,{width:16,height:16,color:"#ccc"}),e(F,{id:"title.exit"})]}),e("h1",{css:H,children:r({id:"title.editOpportuity"})}),o(t,{form:g,css:J,name:"add-opportunity",onFinish:D,layout:"vertical",children:[o(l,{gutter:[20,0],children:[e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.customer"})}),name:"customerName",rules:[{required:!0,message:r({id:"form.input.require.customer"})}],children:e(n,{size:"large",placeholder:r({id:"form.input.placeholder.customer"})})})}),e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.decisionMaker"})}),name:"accountable",rules:[{required:!0,message:r({id:"form.input.require.decisionMaker"})}],children:e(n,{size:"large",placeholder:r({id:"form.input.placeholder.decisionMaker"})})})})]}),o(l,{gutter:[20,0],children:[e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.technicalPerson"})}),name:"technicalLead",rules:[{required:!0,message:r({id:"form.input.require.technicalPerson"})}],children:e(n,{size:"large",placeholder:r({id:"form.input.placeholder.technicalPerson"})})})}),e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.beneficiary"})}),name:"beneficiary",rules:[{required:!0,message:r({id:"form.input.require.beneficiary"})}],children:e(n,{size:"large",placeholder:r({id:"form.input.placeholder.beneficiary"})})})})]}),e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.customerNeeds"})}),name:"need",rules:[{required:!0,message:r({id:"form.input.require.customerNeeds"})}],children:e(n.TextArea,{placeholder:r({id:"form.input.placeholder.customerNeeds"})})}),o(l,{gutter:[20,0],children:[e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.OpportunityTimeline"})}),name:"estimatedTime",rules:[{required:!0,message:r({id:"form.input.require.OpportunityTimeline"})}],children:e(q,{css:m,size:"large",format:["DD/MM/YYYY"],placeholder:"DD/MM/YYYY"})})}),e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.budget"})}),name:"budget",rules:[{required:!0,message:r({id:"form.input.require.budget"})}],children:e(u,{css:m,size:"large",placeholder:r({id:"form.input.placeholder.budget"})})})})]}),o(l,{gutter:[20,0],children:[e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.estimatedPrice"})}),name:"estimatedMoney",rules:[{required:!0,message:r({id:"form.input.require.estimatedPrice"})}],children:e(u,{css:m,size:"large",placeholder:r({id:"form.input.placeholder.estimatedPrice"})})})}),e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.commissionConsultant"})}),name:"commissionMoney",rules:[{required:!0,message:r({id:"form.input.require.commissionConsultant"})}],children:e(u,{css:m,size:"large",placeholder:r({id:"form.input.placeholder.commissionConsultant"})})})})]}),o(l,{gutter:[20,0],children:[e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.oneCompetitor"})}),name:"opponent1",rules:[{required:!0,message:r({id:"form.input.require.oneCompetitor"})}],children:e(n,{size:"large",placeholder:r({id:"form.input.placeholder.oneCompetitor"})})})}),e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.strengthsAndWeaknesses"})}),name:"opponent1Attribute",rules:[{required:!0,message:r({id:"form.input.require.strengthsAndWeaknesses"})}],children:e(n,{size:"large",placeholder:r({id:"form.input.placeholder.strengthsAndWeaknesses"})})})})]}),o(l,{gutter:[20,0],children:[e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.twoCompetitor"})}),name:"opponent2",rules:[{required:!0,message:r({id:"form.input.require.twoCompetitor"})}],children:e(n,{size:"large",placeholder:r({id:"form.input.placeholder.twoCompetitor"})})})}),e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.strengthsAndWeaknesses"})}),name:"opponent2Attribute",rules:[{required:!0,message:r({id:"form.input.require.strengthsAndWeaknesses"})}],children:e(n,{size:"large",placeholder:r({id:"form.input.placeholder.strengthsAndWeaknesses"})})})})]}),e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.strategy"})}),name:"strategy",rules:[{required:!0,message:r({id:"form.input.require.strategy"})}],children:e(n.TextArea,{placeholder:r({id:"form.input.placeholder.strategy"})})}),o(l,{gutter:[20,0],children:[e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.interactionBetweenCompanyAndCustomer"})}),name:"lastTimeInteract",rules:[{required:!0,message:r({id:"form.input.require.interactionBetweenCompanyAndCustomer"})}],children:e(q,{format:["DD/MM/YYYY"],css:m,size:"large",placeholder:r({id:"form.input.placeholder.interactionBetweenCompanyAndCustomer"})})})}),e(s,{span:12,children:e(t.Item,{label:e("span",{css:i,children:r({id:"form.input.WinProbabilityEvaluation"})}),name:"winningOpportunity",rules:[{required:!0,message:r({id:"form.input.require.WinProbabilityEvaluation"})}],children:e(n,{size:"large",placeholder:r({id:"form.input.placeholder.WinProbabilityEvaluation"})})})})]}),e(l,{justify:"end",children:e(b,{loading:M,size:"large",type:"primary",htmlType:"submit",children:"Xác nhận"})})]})]})})}const R={name:"12xj8qc",styles:"width:100%;max-width:90rem;height:100%;margin:3rem auto;position:relative"},U={name:"1xcndgz",styles:"display:flex;align-items:center;gap:0.4rem;position:absolute;right:0;top:0;&:hover{svg{path{fill:#4096ff;}}}"},H={name:"1hxvt0g",styles:"font-size:2.4rem;line-height:2.4rem;font-weight:600;color:rgba(16, 24, 40, 1)"},J={name:"1j6w3rk",styles:".ant-form-item-required::before{display:none!important;}margin-top:2rem"},i={name:"1pi3rvi",styles:"font-size:1.4rem;line-height:1.6rem;font-weight:500;color:rgba(16, 24, 40, 1)"},m={name:"1d3w5wq",styles:"width:100%"};export{ae as default};
//# sourceMappingURL=edit-opportunity-CeIQZjlw.js.map
