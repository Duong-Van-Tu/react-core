{"version":3,"file":"index-x2b5s9gw.js","sources":["../../src/modules/category/enum/huma-resource.enum.ts","../../src/modules/category/components/modals/human-resource/index.tsx","../../src/modules/category/components/dropdown/human-resource.dropdown.tsx","../../src/modules/category/pages/human-resource/column/index.tsx","../../src/modules/category/services/human-resources.service.ts","../../src/modules/category/pages/human-resource/index.tsx"],"sourcesContent":["export enum ModalHumaResourceType {\n  EditHumanResource = 'Edit Human Resource',\n}\n","import { Modal } from 'antd';\nimport { ReactNode, createContext, useContext, useState } from 'react';\nimport { ModalHumaResourceType } from '../../../enum/huma-resource.enum';\n\ntype ModalContexttype = {\n  openModal: (modalName: string, data?: DataUserType) => void;\n  closeModal: () => void;\n};\nconst ModalContext = createContext<ModalContexttype | undefined>(undefined);\n\nexport const useModalUserCategry = () => {\n  const context = useContext(ModalContext);\n  if (!context) {\n    throw new Error('useModalUserCategry must be used within a ModalUserCategoryProvider');\n  }\n  return context;\n};\n\ntype ModalUserCategoryProviderProps = {\n  children?: ReactNode;\n};\n\nexport const ModalUserCategoryProvider = ({ children }: ModalUserCategoryProviderProps) => {\n  const [currentModal, setCurrentModal] = useState<\n    { modalName: string; data?: DataUserType } | undefined\n  >();\n  const [open, setOpen] = useState<boolean>(false);\n\n  const openModal = (modalName: string, data?: DataUserType) => {\n    setCurrentModal({ modalName, data });\n    setOpen(true);\n  };\n\n  const closeModal = () => {\n    setCurrentModal(undefined);\n    setOpen(false);\n  };\n\n  return (\n    <ModalContext.Provider value={{ openModal, closeModal }}>\n      {children}\n      <Modal open={open} onCancel={closeModal} footer={null}>\n        {currentModal?.modalName === ModalHumaResourceType.EditHumanResource && (\n          <div>Edit Modal</div>\n        )}\n      </Modal>\n    </ModalContext.Provider>\n  );\n};\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { Button, Dropdown } from 'antd';\nimport type { MenuProps } from 'antd';\nimport { CustomIcon } from '@/components/icons';\nimport { useLocale } from '@/hooks/locale.hook';\n\nimport { ModalHumaResourceType } from '../../enum/huma-resource.enum';\nimport { useModalUserCategry } from '../modals/human-resource';\n\nenum MenuItem {\n  EditHumanResource = 1,\n}\n\ntype UserDropdownProps = {\n  data?: DataUserType;\n};\n\nexport function UserCategoryDropdown({ data }: UserDropdownProps) {\n  const { openModal } = useModalUserCategry();\n  const { formatMessage } = useLocale();\n\n  const handleItemClick = (key: number) => {\n    switch (key) {\n      case MenuItem.EditHumanResource:\n        openModal(ModalHumaResourceType.EditHumanResource, data);\n        break;\n      default:\n        break;\n    }\n  };\n  const items: MenuProps['items'] = [\n    {\n      key: '1',\n      label: <span>{formatMessage({ id: 'dropdown.edit' })}</span>,\n      onClick: () => handleItemClick(MenuItem.EditHumanResource),\n    },\n  ];\n\n  return (\n    <Dropdown menu={{ items }} placement=\"bottomRight\">\n      <Button css={actionIconBtn}>\n        <CustomIcon type=\"three-dot\" width={16} height={18} />\n      </Button>\n    </Dropdown>\n  );\n}\n\nconst actionIconBtn = css`\n  background: none;\n  border: none;\n  box-shadow: unset;\n  padding: 0;\n`;\n","import { LocaleFormatter } from '@/components/locale-formatter';\nimport { UserCategoryDropdown } from '@/modules/category/components/dropdown/human-resource.dropdown';\nimport { TableProps } from 'antd';\nimport dayjs from 'dayjs';\n\ntype ColumnsType<T> = TableProps<T>['columns'];\n\nexport const usersColumns: ColumnsType<DataUserType> = [\n  {\n    title: <LocaleFormatter id=\"title.column.humanResources.humanResourceCode\" />,\n    dataIndex: 'code',\n    render: (code) => code,\n  },\n  {\n    title: <LocaleFormatter id=\"title.column.humanResources.humanResourceName\" />,\n    dataIndex: 'fullName',\n    render: (fullName) => fullName,\n  },\n  {\n    title: <LocaleFormatter id=\"title.column.humanResources.title\" />,\n    dataIndex: ['applicationRoles'],\n    render: (roles: ApplicationRolesType[]) => (\n      <>\n        {roles?.map((role, index) => (\n          <div key={index}>\n            {role.displayName}\n            {index < roles.length - 1 && <br />}\n          </div>\n        ))}\n      </>\n    ),\n  },\n  {\n    title: <LocaleFormatter id=\"title.column.humanResources.startDate\" />,\n    dataIndex: 'startDate',\n    render: (__, record) => {\n      return `${dayjs(record.startDate).format('DD/MM/YYYY')} `;\n    },\n  },\n  {\n    title: <LocaleFormatter id=\"title.column.humanResources.endDate\" />,\n    dataIndex: 'endDate',\n    render: (__, record) => {\n      return `${dayjs(record.endDate).format('DD/MM/YYYY')} `;\n    },\n  },\n  {\n    title: 'Email',\n    dataIndex: 'email',\n    render: (email) => email,\n  },\n  {\n    title: <LocaleFormatter id=\"title.column.humanResources.numberPhone\" />,\n    dataIndex: 'phone',\n    render: (phone) => phone,\n  },\n  {\n    title: <LocaleFormatter id=\"title.column.humanResources.evaluate\" />,\n    dataIndex: 'review',\n    render: (review) => review,\n  },\n  {\n    title: <LocaleFormatter id=\"title.column.humanResources.note\" />,\n    dataIndex: 'notes',\n    render: (notes) => notes,\n  },\n  {\n    title: '',\n    fixed: 'right',\n    width: '6%',\n    render: (__, record) => <UserCategoryDropdown data={record} />,\n  },\n];\n","import { useApi, useCaller } from '@/hooks/api.hook';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setListHumanResourcesAction } from '../reducers/slicers/human-resources.slice';\nimport { Pagination } from '@/constants/pagination';\nimport { generateUrlParams } from '@/utils/common';\nimport dayjs from 'dayjs';\n\ntype FilterHumanResourcesType = {\n  applicationUserId?: string;\n  pageIndex: number;\n  pageSize: number;\n  textSearch?: string;\n  orderCol?: string;\n  orderDir?: string;\n  code?: string;\n  userId?: string;\n  statusId?: string;\n  roleId?: string;\n  time?: string;\n  roleType?: string;\n  tenant?: string;\n};\n\nexport const useHumanResources = () => {\n  const api = useApi('');\n  const caller = useCaller();\n  const dispatch = useDispatch();\n\n  const getListUsers = useCallback(\n    async ({\n      pageIndex = Pagination.PAGEINDEX,\n      pageSize = Pagination.PAGESIZE,\n      textSearch,\n      time = dayjs().year().toString(),\n    }: FilterHumanResourcesType) => {\n      const queryParams: { [key: string]: string | undefined } = {\n        PageIndex: pageIndex.toString(),\n        PageSize: pageSize.toString(),\n        TextSearch: textSearch,\n        Time: `1-1-${time}`,\n      };\n\n      const urlParams = generateUrlParams(queryParams);\n\n      const { data, succeeded } = await caller(\n        () => api.get(`/ApplicationUsers/get-list-with-pagination?${urlParams}`),\n        {\n          loadingKey: 'get-list-user',\n        },\n      );\n      if (succeeded) {\n        const { items, totalRecords, pageIndex, totalPages, totalExtend } = data;\n        dispatch(\n          setListHumanResourcesAction({\n            data: items,\n            pagination: {\n              pageIndex,\n              totalRecords,\n              totalPages,\n            },\n            totalExtend,\n          }),\n        );\n      }\n    },\n    [caller, api],\n  );\n\n  return {\n    getListUsers,\n  };\n};\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { TableCustom } from '@/components/table';\nimport { setBreadcrumbItemsAction } from '@/redux/slicers/breadcrumb.slice';\nimport { usersColumns } from './column';\nimport { Pagination } from '@/constants/pagination';\nimport { useRootSelector } from '@/hooks/selector.hook';\nimport { useWatchLoading } from '@/hooks/loading.hook';\nimport { usePermission } from '@/hooks/permission.hook';\nimport { useLocale } from '@/hooks/locale.hook';\nimport { Search, SearchParams } from '@/components/search';\nimport { ModalUserCategoryProvider } from '../../components/modals/human-resource';\nimport { useHumanResources } from '../../services/human-resources.service';\n\nexport default function HumanResourcesPage() {\n  const { formatMessage } = useLocale();\n  const { getListUsers } = useHumanResources();\n  const [loadingAdmin] = useWatchLoading(['get-list-user', true]);\n\n  const { data, pagination } = useRootSelector((state) => state.category.humanResources);\n  const user = useRootSelector((state) => state.auth.user);\n\n  const { isAdmin } = usePermission();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const breadCrumbItems = [\n      {\n        title: {\n          vi_VN: 'Danh mục',\n          en_US: 'Category',\n        },\n      },\n      {\n        title: {\n          vi_VN: 'Nhân sự',\n          en_US: 'Personnel',\n        },\n      },\n    ];\n    dispatch(setBreadcrumbItemsAction(breadCrumbItems));\n  }, [dispatch]);\n\n  useEffect(() => {\n    handleGetInfo();\n  }, []);\n\n  const handleGetInfo = () => {\n    if (isAdmin) {\n      getListUsers({\n        pageIndex: Pagination.PAGEINDEX,\n        pageSize: Pagination.PAGESIZE,\n      });\n    }\n  };\n\n  const handleSearch = ({ textSearch, time }: SearchParams) => {\n    getListUsers({\n      pageIndex: pagination?.pageIndex ?? Pagination.PAGEINDEX,\n      pageSize: Pagination.PAGESIZE,\n      textSearch,\n      time,\n    });\n  };\n\n  const handleTableChange = (page: number) => {\n    getListUsers({\n      pageIndex: page,\n      pageSize: Pagination.PAGESIZE,\n    });\n  };\n\n  return (\n    <ModalUserCategoryProvider>\n      <h3 css={titleStyle}>{formatMessage({ id: 'title.document.human-resource' })}</h3>\n      <div css={searchContainer}>\n        <Search onSearch={handleSearch} />\n      </div>\n      <TableCustom\n        columns={usersColumns}\n        dataSource={isAdmin ? data : [user]}\n        loading={loadingAdmin}\n        rowKey={(record) => record.id}\n        onTableChange={(page) => handleTableChange(page)}\n        pagination={\n          isAdmin\n            ? {\n                current: pagination?.pageIndex,\n                pageSize: Pagination.PAGESIZE,\n                total: pagination?.totalRecords,\n                position: ['bottomCenter'],\n              }\n            : undefined\n        }\n        scroll={{ x: 1450 }}\n      />\n    </ModalUserCategoryProvider>\n  );\n}\n\nconst titleStyle = css`\n  font-size: 1.8rem;\n  line-height: 2rem;\n  font-weight: 500;\n  margin-bottom: 2.4rem;\n  color: #101828;\n`;\n\nconst searchContainer = css`\n  margin: 2.6rem 0;\n`;\n"],"names":["ModalHumaResourceType","EditHumanResource","ModalContext","createContext","undefined","context","ModalUserCategoryProvider","setOpen","children","currentModal","setCurrentModal","useState","modalName","openModal","closeModal","data","formatMessage","handleItemClick","MenuItem","items","label","id","onClick","Button","actionIconBtn","CustomIcon","_EMOTION_STRINGIFIED_CSS_ERROR__","usersColumns","title","jsx","LocaleFormatter","dataIndex","render","code","fullName","roles","map","role","index","jsxs","displayName","length","__","record","dayjs","startDate","format","endDate","email","phone","review","notes","fixed","width","UserCategoryDropdown","useHumanResources","api","useApi","caller","useCaller","dispatch","useDispatch","getListUsers","useCallback","pageIndex","Pagination","PAGEINDEX","pageSize","PAGESIZE","textSearch","time","year","toString","queryParams","PageIndex","PageSize","TextSearch","Time","urlParams","generateUrlParams","succeeded","get","loadingKey","totalRecords","totalPages","totalExtend","setListHumanResourcesAction","pagination","HumanResourcesPage","useLocale","loadingAdmin","useWatchLoading","useRootSelector","state","category","humanResources","user","auth","isAdmin","usePermission","useEffect","setBreadcrumbItemsAction","vi_VN","en_US","handleGetInfo","handleSearch","handleTableChange","page","titleStyle","searchContainer","Search","TableCustom","current","total","position","x","name","styles"],"mappings":"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"}