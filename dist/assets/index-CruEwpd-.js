import{r,Q as O,_ as V,u as H,a as N,b as j,d as k,U as F,V as G,W as Q,X as B,t as I,c as U,n as f,o as t,p as X,A as M,x as Y,R as $,B as L,C as R,Y as Z,w as J}from"./index-Bakn7Zu-.js";import{R as E}from"./DownloadOutlined-D65jB3Tt.js";var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},ee=function(a,o){return r.createElement(O,V({},a,{ref:o,icon:W}))},te=r.forwardRef(ee);const _=()=>{const s=H(""),a=N(),o=j(),u=r.useCallback(async({textSearch:l,tenant:n,roleType:m,roleId:p})=>{const b=k({TextSearch:l,RoleType:m,RoleId:p,tenant:n}),{data:y,succeeded:w}=await a(()=>s.get(`/SaleKit/get-all?${b}`),{loadingKey:"get-sale-kit"});w&&o(F({data:y}))},[a,s]),c=r.useCallback(async({textSearch:l,tenant:n,roleType:m,roleId:p})=>{const b=k({TextSearch:l,RoleType:m,RoleId:p,tenant:n}),y=await a(()=>s.get(`/ApplicationRoleSaleKit/get-all?${b}`),{loadingKey:"get-sale-kit-role"});if(y){const{data:w,succeeded:A}=y;A&&o(G({data:w}))}},[a,s]),x=r.useCallback(async({tenant:l,dataUpdate:n})=>{const p=k({tenant:l}),g=await a(()=>s.put(`ApplicationRoleSaleKit/update?${p}`,n),{loadingKey:"update-sale-kit-with-role"});console.log(g)},[s,a]),v=r.useCallback(async({textSearch:l,tenant:n,roleType:m})=>{const g=k({TextSearch:l,RoleType:m,tenant:n}),{data:b,succeeded:y}=await a(()=>s.get(`/ApplicationRoles/get-all?${g}`),{loadingKey:"get-all-role"});y&&o(Q({data:b}))},[a,s]),S=r.useCallback(async({id:l,tenant:n})=>{const p=k({id:l,tenant:n});return await a(()=>s.get(`/SaleKit/download-document?${p}`),{loadingKey:"download-sale-kit"})},[a,s]);return{getAllSaleKit:u,downLoadDocument:S,getAllRoleInSaleKit:v,getAllSaleKitRole:c,updateSaleKitWithRole:x}},ae=B.Group,se=({isAdmin:s,checkedList:a,setCheckedList:o,data:u,dataWithRole:c,downLoadDocument:x})=>{const{formatMessage:v}=I(),{updateSaleKitWithRole:S}=_(),l=U(e=>e.auth.user),[n,m]=r.useState([]);r.useEffect(()=>{if(u){const e=u==null?void 0:u.map(d=>({value:d.id,label:d.name}));m(e);return}if(c){const e=[],d=c==null?void 0:c.map(i=>(i.access&&e.push(i.id),{value:i.id,label:i.fileName}));o(e),m(d)}},[u,c]);const p=n.length===a.length,g=a.length>0&&a.length<n.length,b=async e=>{if(c&&c.length>0){const d=c.map(i=>e.includes(i.id)?{...i,access:!0}:{...i,access:!1});await S({dataUpdate:{data:d,lastModifiedApplicationUserId:l==null?void 0:l.id}})}o(e)},y=e=>{o(e.target.checked?n.map(d=>d.value):[])},w=(e,d)=>{for(var i=e.replace(/[^A-Za-z0-9\+\/]/g,""),C=i.length,P=C*3+1>>2,q=new Uint8Array(P),h,D,z=0,T=0,K=0;K<C;K++)if(D=K&3,z|=parseInt(i.charAt(K),64)<<18-6*D,D===3||C-K===1){for(h=0;h<3&&T<P;h++,z>>=8)q[T++]=z>>>16;z=0}return q},A=async(e,d)=>{if(!c){const i=await x({id:e}),C=w(i.split(",")[1]),P=new Blob([C],{type:"application/octet-stream"}),q=URL.createObjectURL(P),h=document.createElement("a");h.href=q,h.download=d,document.body.appendChild(h),h.click(),document.body.removeChild(h)}};return f("div",{style:{margin:"18px 0"},children:[s&&t(B,{indeterminate:g,onChange:y,checked:p,style:{marginBottom:"16px"},children:t("p",{style:{fontSize:"16px",color:"#8993A4"},children:v({id:"table.column.saleKit.selectAll"})})}),s?t(ae,{style:{display:"flex",flexDirection:"column",gap:"32px"},value:a,onChange:b,children:n.map(e=>t(B,{value:e.value,children:f("a",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"18px",textDecoration:"underline"},href:"#",onClick:()=>A(e.value,e.label),children:[t(E,{}),e.label]})},e.value))}):t("div",{style:{display:"flex",flexDirection:"column",gap:"32px"},children:n.map(e=>t("span",{children:f("a",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"18px",textDecoration:"underline"},href:"#",onClick:()=>A(e.value,e.label),children:[t(E,{}),e.label]})},e.value))})]})},le=se;function de(){const{getAllSaleKit:s,downLoadDocument:a}=_(),{isAdmin:o}=X(),{data:u}=U(l=>l.sale.saleKit),[c,x]=r.useState([]),v=j(),{formatMessage:S}=I();return r.useEffect(()=>{v(M([{title:{vi_VN:"Sale",en_US:"Sale"}},{title:{vi_VN:"Sale kit",en_US:"Sale kit"}}]))},[v]),r.useEffect(()=>{s({})},[]),f(r.Fragment,{children:[t("h3",{css:ce,children:S({id:"title.document.saleKit"})}),t("div",{css:ie,children:t(Y,{onSearch:()=>{}})}),o&&f($,{css:re,justify:"space-between",align:"bottom",children:[t(R,{children:t(L,{disabled:c.length===0,onClick:()=>{},size:"large",danger:!0,children:"Xoá mục tiêu đã chọn"})}),t(R,{children:f($,{gutter:[10,10],justify:"space-between",align:"bottom",children:[t(R,{children:t(L,{size:"large",children:t(Z,{to:"/sales/sale-kit/auth",children:"Quản lý quyền truy cập"})})}),t(R,{children:t(L,{icon:t(te,{}),onClick:()=>{},size:"large",type:"primary",children:"Thêm tài liệu"})})]})})]}),f("div",{css:ne,children:[t("span",{children:S({id:"title.document.saleKit"})}),t(J,{width:8,height:8,type:"dot"}),f("span",{children:[u==null?void 0:u.length," ",S({id:"title.document.saleKit"})]})]}),t(le,{isAdmin:o,setCheckedList:x,checkedList:c,data:u,downLoadDocument:a})]})}const ne={name:"19qu8x5",styles:"display:flex;align-items:center;margin-top:0.4rem;gap:4px;font-size:1.4rem"},ce={name:"156m3vd",styles:"font-size:1.8rem;line-height:2.3rem;font-weight:600"},ie={name:"gjoxlq",styles:"margin:2.6rem 0"},re={name:"5bn9ws",styles:"margin:2.4rem 0 1.4rem 0"};export{de as default};
//# sourceMappingURL=index-CruEwpd-.js.map
