import{t as w,z as C,g as O,o as t,B as I,w as x,D as G,L as d,e as k,r as f,m as L,c as N,v as $,P as l,n as u,x as R,T as j,b as B,A as Z}from"./index-Bakn7Zu-.js";import{u as v,M as c,a as H}from"./index-EKr7IYs7.js";import{M as K}from"./message-BaT4kEws.js";import{b as m}from"./status.enum-aM5KhW0K.js";import{u as U}from"./opportunity.service-Ce2J1PJa.js";import"./index-B85xVXIU.js";import"./index-BxD5BTBy.js";import"./index-DlE2oBel.js";import"./index-s-JRt1VF.js";function X({data:e}){const{openModal:n}=v(),{formatMessage:o}=w(),i=C(),s=O(),p=h=>{switch(h){case 1:n(c.AssignOpportunity,e);break;case 2:n(c.CloseOpportunity,e);break;case 3:n(c.Delete,e);break;case 4:n(c.CreateHistoryOpportunity);break}},y=[{key:"1",label:t("span",{children:o({id:"title.dropdown.requestEdit"})}),onClick:()=>i(`/sales/opportunity/${e==null?void 0:e.id}?tenant=${s}`)},{key:"2",label:t("span",{children:o({id:"title.dropdown.opportunity.assignOpportunity"})}),onClick:()=>p(1)},{key:"3",label:t("span",{children:o({id:"title.dropdown.opportunity.updateOpportunity"})}),onClick:()=>i(`/sales/opportunity/history-opportunity/${e.id}?tenant=${s}`)},{key:"4",label:t("span",{children:o({id:"title.dropdown.opportunity.closeOpportunity"})}),onClick:()=>p(2)},{key:"5",label:t("span",{children:o({id:"title.dropdown.opportunity.resultReport"})}),onClick:()=>i(`/sales/opportunity/report-opportunity/${e.id}?tenant=${s}`)},{key:"6",label:t("span",{children:o({id:"dropdown.delete"})})}];return t(G,{menu:{items:y},placement:"bottomRight",children:t(I,{css:q,children:t(x,{type:"three-dot",width:16,height:18})})})}const q={name:"l2srbf",styles:"background:none;border:none;box-shadow:unset;padding:0"},F=[{title:t(d,{id:"table.column.customers"}),dataIndex:"customerName"},{title:t(d,{id:"table.column.opportunity.customerNeeds"}),dataIndex:"need",render:e=>e},{title:t(d,{id:"table.column.opportunity.decisionMakers"}),dataIndex:"accountable"},{title:t(d,{id:"table.column.opportunity.budget"}),dataIndex:"budget",render:e=>e,width:"8%"},{title:t(d,{id:"table.column.opportunity.expectedTime"}),dataIndex:"estimatedTime",render:e=>k(e).format("DD/MM/YYYY")},{title:t(d,{id:"table.column.opportunity.technicalLeads"}),dataIndex:"technicalLead"},{title:t(d,{id:"table.column.opportunity.beneficiaries"}),dataIndex:"beneficiary",render:e=>e},{title:"Giá vốn dự kiến",dataIndex:"estimatedMoney"},{title:"Hoa hồng cho người tư vấn",dataIndex:"commissionMoney"},{title:"Đối thủ 1",dataIndex:"opponent1"},{title:"Đối thủ 1",dataIndex:"opponent2"},{title:"Chiến lược của AT&A",dataIndex:"strategy"},{title:"Lần tương tác gần nhất giữa AT&A và khách hàng ",dataIndex:"lastTimeInteract",render:e=>k(e).format("DD/MM/YYYY")},{title:"Đánh giá khả năng thắng",dataIndex:"winningOppotunity"},{title:"Trạng thái",align:"center",dataIndex:["opportunityStatus","name"],render:(e,n)=>{var i,s;let o;switch((i=n.opportunityStatus)==null?void 0:i.code){case m.Active:o="success";break;case m.OnHold:o="info";break;case m.Fail:case m.Close:o="error";break;default:o="warning"}return t(K,{hasBackground:!0,type:o,children:(s=n.opportunityStatus)==null?void 0:s.name})}},{title:"",dataIndex:"calculationMethod",fixed:"right",width:"6%",render:(e,n)=>t(X,{data:n})}];function V(){const{openModal:e}=v(),{formatMessage:n}=w(),o=C(),{getAllOpportunity:i,getAllStatusOpportunity:s}=U(),[p,y]=f.useState(),[h,M]=L(["get-opportunity",!0],["status-opportunity",!0]),{pagination:r,status:E,data:A,totalExtend:T}=N(a=>a.sale.opportunity),{textSearch:S,time:D,statusId:z}=$(),P={onChange:(a,g)=>{y(g.map(b=>b.id))}},_=a=>{i({pageIndex:a,pageSize:l.PAGESIZE,textSearch:S?decodeURI(S).replace(/\+/g," "):void 0,time:D,statusId:z})},Y=({textSearch:a,statusId:g,time:b})=>{i({pageIndex:(r==null?void 0:r.pageIndex)??l.PAGEINDEX,pageSize:l.PAGESIZE,textSearch:a,statusId:g,time:b})};return f.useEffect(()=>{i({pageIndex:l.PAGEINDEX,pageSize:l.PAGESIZE}),s()},[i,s]),u("div",{css:Q,children:[t("h3",{css:J,children:n({id:"title.document.opportunity"})}),u("div",{css:W,children:[t("span",{children:n({id:"title.document.opportunity"})}),t(x,{width:8,height:8,type:"dot"}),u("span",{children:[T??0," ",n({id:"title.document.opportunity"})]})]}),u(I,{onClick:()=>o(`add-opportunity?tenant=${O()}`),type:"primary",css:tt,iconPosition:"start",size:"large",children:[t(x,{color:"#fff",width:16,height:16,type:"circle-plus"})," ",t("span",{children:"Thêm cơ hội"})]}),t("div",{css:et,children:t(R,{onSearch:Y,loadingStatus:M,status:E})}),t(I,{disabled:!p,onClick:()=>e(c.Delete,void 0,p),size:"large",danger:!0,children:"Xoá mục tiêu đã chọn"}),t(j,{css:nt,rowSelection:P,columns:F,dataSource:A,loading:h,rowKey:a=>a.id,onTableChange:a=>_(a),pagination:{current:r==null?void 0:r.pageIndex,pageSize:l.PAGESIZE,total:r==null?void 0:r.totalRecords,position:["bottomCenter"]},scroll:{x:2500}})]})}const Q={name:"bjn8wh",styles:"position:relative"},W={name:"1t3fva7",styles:"display:flex;align-items:center;gap:4px;font-size:1.4rem;line-height:1.8rem"},J={name:"156m3vd",styles:"font-size:1.8rem;line-height:2.3rem;font-weight:600"},tt={name:"1skuuz6",styles:"background:#0070b8;display:flex;align-items:center;gap:0.2rem;position:absolute;top:1.4rem;right:0;&:hover{background:#0070b8!important;opacity:0.9;}"},et={name:"gjoxlq",styles:"margin:2.6rem 0"},nt={name:"f2f29z",styles:"margin-top:2.6rem"};function ut(){const e=B();return f.useEffect(()=>{e(Z([{title:{vi_VN:"Sale",en_US:"Sale"}},{title:{vi_VN:"Cơ hội",en_US:"Opportunity"}}]))},[e]),t(H,{children:t(V,{})})}export{ut as default};
//# sourceMappingURL=index-t4AU-uVO.js.map
