import{e as T,f as j,g as q,h as z,b as B,r as o,i as F,d4 as N,P as g,d5 as X,k as r,d6 as Z,d7 as h,d8 as H,d9 as J,da as M,db as O,dc as y}from"./index-D7kYuqtd.js";import{d as V}from"./dayjs.min-SzvlDAgD.js";const _=()=>{const t=T(""),e=j(),d=q(),c=z(),n=B(a=>a.auth.user),R=o.useCallback(async({pageIndex:a=g.PAGEINDEX,pageSize:s=g.PAGESIZE,textSearch:i,statusId:l,time:p=V().year().toString(),roleType:u})=>{const D={PageIndex:a.toString(),PageSize:s.toString(),UserId:n==null?void 0:n.id,RoleId:n==null?void 0:n.applicationRoles[0].id,StatusId:l,Time:`1-1-${p}`,TextSearch:i,tenant:c,roleType:u},I=F(D),{data:P,succeeded:x}=await e(()=>t.post(`/Relationship/get-list-with-pagination?${I}`),{loadingKey:"get-relationship"});if(x){const{items:Q,totalRecords:E,pageIndex:L,totalPages:v,totalExtend:U}=P;d(N({data:Q,pagination:{pageIndex:L,totalRecords:E,totalPages:v},totalExtend:U}))}},[e,t]),f=o.useCallback(async a=>{const{data:s,succeeded:i}=await e(()=>t.get(`/Gains/get-by-relationship-id/${a}`),{loadingKey:"gainsDetail-loading",messageKey:"gainsDetail-message"});i&&d(X(s))},[e,t]),b=o.useCallback(async a=>{const{id:s,...i}=a,l=r({...i}),{succeeded:p}=await e(()=>t.post("/Gains/add-or-update",[{id:s,data:l}]),{loadingKey:"updateGainsDetail-loading",messageKey:"updateGainsDetail-message"});return!!p},[e,t]),m=o.useCallback(async a=>{const s=r({...a}),{data:i,succeeded:l}=await e(()=>t.post(`/Relationship/add-or-update?tenant=${c}`,[{data:s}]),{loadingKey:"add-relationship"});return l?(d(Z(i[0])),l):!1},[t,e]),A=o.useCallback(async a=>{const{id:s,...i}=a,l=r({...i,userSuggestId:n==null?void 0:n.id}),{data:p,succeeded:u}=await e(()=>t.post(`/Relationship/add-or-update?tenant=${c}`,[{id:s,data:l}]),{loadingKey:"edit-relationship"});return u?(d(h(p[0])),u):!1},[t,e]),C=o.useCallback(async a=>{const s=a.join(","),{succeeded:i}=await e(()=>t.del(`/Relationship/delete-by-ids/${s}/${n==null?void 0:n.id}?tenant=${c}`),{loadingKey:"delete-relationship"});return i?(d(H(a)),i):!1},[t,e]),G=o.useCallback(async a=>{const s=r({...a}),{data:i,succeeded:l}=await e(()=>t.put(`/Relationship/update-status-by-id?tenant=${c}`,s),{loadingKey:"edit-status"});return l?(d(h(i)),l):!1},[t,e]),$=o.useCallback(async()=>{const{data:a,succeeded:s}=await e(()=>t.get(`/RelationshipStatus/get-all?tenant=${c}`),{loadingKey:"status-relationship"});s&&d(J(a))},[t,e]),K=o.useCallback(async()=>{const{data:a,succeeded:s}=await e(()=>t.get(`/Customer/get-all?tenant=${c}`),{loadingKey:"relationship-customer"});s&&d(M(a))},[t,e]),S=o.useCallback(async()=>{const{data:a,succeeded:s}=await e(()=>t.get(`/RelationshipLevel/get-all?tenant=${c}`),{loadingKey:"relationship-level"});s&&d(O(a))},[t,e]),k=o.useCallback(async a=>{const{data:s,succeeded:i}=await e(()=>t.get(`/RelationshipGainsQuestion/get-by-relationship-id/${a}?tenant=${c}`),{loadingKey:"relationship-gainsQuestion"});i&&d(y(s))},[t,e]),w=o.useCallback(async a=>{const{data:s,succeeded:i}=await e(()=>t.post(`/RelationshipGainsQuestion/add-or-update?tenant=${c}`,a),{loadingKey:"relationship-updateGainsQuestion"});return i?(d(y(s)),i):!1},[t,e]);return{getAllRelationship:R,addRelationship:m,deleteRelationship:C,updateRelationship:A,updateStatusRelationship:G,getAllStatusRelationship:$,getListCustomer:K,getAllLevel:S,getGainsRelationshipById:f,updateGainsRelationship:b,getRelationshipGainsQuestion:k,updateRelationshipGainsQuestion:w}};export{_ as u};
//# sourceMappingURL=relationship.service-B_Vy62zW.js.map
