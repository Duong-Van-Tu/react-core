import{u as _,a as k,b as L,g as X,r as R,d as A,a0 as W,P as l,e as T,a1 as B,a2 as V,a3 as K,p as w,c as D,o as n,L as i,Y as $,a4 as x,T as N,t as j,m as U,A as q,n as G,x as F,B as O,E as Y}from"./index-Bakn7Zu-.js";import{R as M}from"./DownloadOutlined-D65jB3Tt.js";const z=()=>{const o=_(""),e=k(),a=L(),t=X(),d=R.useCallback(async({pageIndex:r=l.PAGEINDEX,pageSize:p=l.PAGESIZE,textSearch:h,time:E=T().year().toString()})=>{const c={tenant:t,PageIndex:r.toString(),PageSize:p.toString(),TextSearch:h,Time:`1-1-${E}`},m=A(c),{data:S,succeeded:P}=await e(()=>o.post(`/EmployeeSalary/get-list-with-pagination?${m}`),{loadingKey:"get-list-income"});if(P){const{items:b,totalRecords:f,pageIndex:s,totalPages:I,totalExtend:y}=S;a(W({data:b,pagination:{pageIndex:s,totalRecords:f,totalPages:I},totalExtend:y}))}},[e,o]),u=R.useCallback(async({pageIndex:r=l.PAGEINDEX,pageSize:p=l.PAGESIZE,textSearch:h,time:E=T().year().toString()})=>{const c={tenant:t,PageIndex:r.toString(),PageSize:p.toString(),TextSearch:h,Time:`1-1-${E}`},m=A(c),{data:S,succeeded:P}=await e(()=>o.post(`/EmployeeSalary/get-list-role-with-pagination?${m}`),{loadingKey:"get-list-income-with-role-user"});if(P){const{items:b,totalRecords:f,pageIndex:s,totalPages:I,totalExtend:y}=S;a(B({data:b,pagination:{pageIndex:s,totalRecords:f,totalPages:I},totalExtend:y}))}},[e,o]),g=R.useCallback(async({pageIndex:r=l.PAGEINDEX,pageSize:p=l.PAGESIZE,textSearch:h,time:E=T().year().toString()})=>{const c={tenant:t,PageIndex:r.toString(),PageSize:p.toString(),TextSearch:h,Time:`1-1-${E}`},m=A(c),{data:S,succeeded:P}=await e(()=>o.post(`/EmployeeSalary/get-list-admin-role-with-pagination?${m}`),{loadingKey:"get-list-income-with-role-admin"});if(P){const{items:b,totalRecords:f,pageIndex:s,totalPages:I,totalExtend:y}=S;a(V({data:b,pagination:{pageIndex:s,totalRecords:f,totalPages:I},totalExtend:y}))}},[e,o]);return{getListIncomeDetail:R.useCallback(async({pageIndex:r=l.PAGEINDEX,pageSize:p=l.PAGESIZE,month:h,year:E,userId:c})=>{const m={tenant:t,PageIndex:r.toString(),PageSize:p.toString(),month:h,year:E,userId:c},S=A(m),{data:P,succeeded:b}=await e(()=>o.post(`/EmployeeSalaryDetail/get-list-with-pagination?${S}`),{loadingKey:"get-list-income-detail"});if(b){const{items:f,totalRecords:s,pageIndex:I,totalPages:y,totalExtend:Z}=P;a(K({data:f,pagination:{pageIndex:I,totalRecords:s,totalPages:y},totalExtend:Z}))}},[e,o]),getListIncome:d,getListIncomeWithRoleUser:u,getListIncomeWithRoleAdmin:g}},v=({recordAdmin:o,recordUser:e})=>{const{getListIncomeDetail:a}=z(),{isAdmin:t}=w(),d=D(g=>g.auth.user);return n($,{style:{textAlign:"center",display:"block"},onClick:()=>{a(t&&o?{userId:o.applicationUser.id,pageIndex:l.PAGEINDEX,pageSize:l.PAGESIZE}:{userId:d==null?void 0:d.id,month:e==null?void 0:e.month.toString(),year:e==null?void 0:e.year.toString(),pageIndex:l.PAGEINDEX,pageSize:l.PAGESIZE})},to:"/personnel/infor-income/details-view",children:n(i,{id:"title.document.detailsView"})})},H=[{title:n(i,{id:"title.month"}),dataIndex:"month"},{title:n(i,{id:"table.column.currentIncome.position1"}),dataIndex:"oneLocation",render:(o,e)=>{var a,t;return n(x,{children:(a=e==null?void 0:e.incomeRoles[0])!=null&&a.income?(t=e==null?void 0:e.incomeRoles[0])==null?void 0:t.income:"-"})}},{title:n(i,{id:"table.column.currentIncome.position2"}),dataIndex:"twoLocation",render:(o,e)=>{var a,t;return n(x,{children:(a=e==null?void 0:e.incomeRoles[1])!=null&&a.income?(t=e==null?void 0:e.incomeRoles[1])==null?void 0:t.income:"-"})}},{title:n(i,{id:"table.column.currentIncome.position3"}),dataIndex:"threeLocation",render:(o,e)=>{var a,t;return n(x,{children:(a=e==null?void 0:e.incomeRoles[2])!=null&&a.income?(t=e==null?void 0:e.incomeRoles[2])==null?void 0:t.income:"-"})}},{title:n(i,{id:"table.column.currentIncome.position4"}),dataIndex:"fourLocation",render:(o,e)=>{var a,t;return n(x,{children:(a=e==null?void 0:e.incomeRoles[3])!=null&&a.income?(t=e==null?void 0:e.incomeRoles[3])==null?void 0:t.income:"-"})}},{title:n(i,{id:"table.column.currentIncome.position5"}),dataIndex:"fiveLocation",render:(o,e)=>{var a,t;return n(x,{children:(a=e==null?void 0:e.incomeRoles[4])!=null&&a.income?(t=e==null?void 0:e.incomeRoles[4])==null?void 0:t.income:"-"})}},{title:n(i,{id:"table.column.currentIncome.otherIncome"}),dataIndex:"incomeOther"},{title:n(i,{id:"table.column.currentIncome.totalIncomeReceived"}),dataIndex:"totalIncome"},{title:"",dataIndex:"detailsView",fixed:"right",width:"10%",render:(o,e)=>n(v,{recordUser:e})}],J=[{title:n(i,{id:"title.column.income.humanResourceCode"}),dataIndex:["applicationUser","id"]},{title:n(i,{id:"title.column.income.fullName"}),dataIndex:["applicationUser","fullName"]},{title:n(i,{id:"table.column.currentIncome.position1"}),dataIndex:"oneLocation",render:(o,e)=>{var a,t;return n(x,{children:(a=e==null?void 0:e.incomeRoles[0])!=null&&a.income?(t=e==null?void 0:e.incomeRoles[0])==null?void 0:t.income:"-"})}},{title:n(i,{id:"table.column.currentIncome.position2"}),dataIndex:"twoLocation",render:(o,e)=>{var a,t;return n(x,{children:(a=e==null?void 0:e.incomeRoles[1])!=null&&a.income?(t=e==null?void 0:e.incomeRoles[1])==null?void 0:t.income:"-"})}},{title:n(i,{id:"table.column.currentIncome.position3"}),dataIndex:"threeLocation",render:(o,e)=>{var a,t;return n(x,{children:(a=e==null?void 0:e.incomeRoles[2])!=null&&a.income?(t=e==null?void 0:e.incomeRoles[2])==null?void 0:t.income:"-"})}},{title:n(i,{id:"table.column.currentIncome.position4"}),dataIndex:"fourLocation",render:(o,e)=>{var a,t;return n(x,{children:(a=e==null?void 0:e.incomeRoles[3])!=null&&a.income?(t=e==null?void 0:e.incomeRoles[3])==null?void 0:t.income:"-"})}},{title:n(i,{id:"table.column.currentIncome.position5"}),dataIndex:"fiveLocation",render:(o,e)=>{var a,t;return n(x,{children:(a=e==null?void 0:e.incomeRoles[4])!=null&&a.income?(t=e==null?void 0:e.incomeRoles[4])==null?void 0:t.income:"-"})}},{title:n(i,{id:"table.column.currentIncome.otherIncome"}),dataIndex:"incomeOther"},{title:n(i,{id:"table.column.currentIncome.totalIncomeReceived"}),dataIndex:"totalIncome"},{title:"",dataIndex:"detailsView",fixed:"right",width:"10%",render:(o,e)=>n(v,{recordAdmin:e})}];function Q({data:o,isAdmin:e,loading:a,pagination:t,getListIncomeWithRoleAdmin:d,getListIncomeWithRoleUser:u}){return n(N,{columns:e?J:H,dataSource:o,loading:a,rowKey:g=>g.key,pagination:{current:t==null?void 0:t.pageIndex,pageSize:l.PAGESIZE,total:t==null?void 0:t.totalRecords,position:["bottomCenter"],onChange:g=>{e?d({pageIndex:g,pageSize:l.PAGESIZE}):u({pageIndex:g,pageSize:l.PAGESIZE})}},scroll:{x:1450}})}const ee=[{title:n(i,{id:"table.column.currentIncome.totalIncomeBeforeTaxes"}),dataIndex:"incomeBeforeTax"},{title:n(i,{id:"table.column.currentIncome.totalIncomeIsNotTaxable"}),dataIndex:"incomeNonTax"},{title:n(i,{id:"table.column.currentIncome.totalDeductionDueToFamilyCircumstances"}),dataIndex:"dependent"},{title:n(i,{id:"table.column.currentIncome.totalSocialInsuranceAmount"}),dataIndex:"insurance"},{title:n(i,{id:"table.column.currentIncome.totalTaxableIncome"}),dataIndex:"incomeTax"},{title:n(i,{id:"table.column.currentIncome.totalTemporaryTaxCollected"}),dataIndex:"personalIncomeTax"},{title:n(i,{id:"table.column.currentIncome.totalIncomeReceived"}),dataIndex:"incomeRecevied"}],te=[{title:n(i,{id:"title.column.income.humanResourceCode"}),dataIndex:["applicationUser","id"]},{title:n(i,{id:"title.column.income.fullName"}),dataIndex:["applicationUser","fullName"]},{title:n(i,{id:"title.column.income.position"}),dataIndex:"roles",render:o=>o.map(e=>e.name).join(", ")},{title:n(i,{id:"table.column.currentIncome.totalIncomeBeforeTaxes"}),dataIndex:"incomeBeforeTax"},{title:n(i,{id:"table.column.currentIncome.totalIncomeIsNotTaxable"}),dataIndex:"incomeNonTax"},{title:n(i,{id:"table.column.currentIncome.totalDeductionDueToFamilyCircumstances"}),dataIndex:"dependent"},{title:n(i,{id:"table.column.currentIncome.totalSocialInsuranceAmount"}),dataIndex:"insurance"},{title:n(i,{id:"table.column.currentIncome.totalTaxableIncome"}),dataIndex:"incomeTax"},{title:n(i,{id:"table.column.currentIncome.totalTemporaryTaxCollected"}),dataIndex:"personalIncomeTax"},{title:n(i,{id:"table.column.currentIncome.totalIncomeReceived"}),dataIndex:"incomeRecevied"}];function ne({data:o,loading:e,isAdmin:a,pagination:t,getListIncome:d}){return n(N,{columns:a?te:ee,dataSource:o,loading:e,rowKey:u=>u.key,pagination:a?{current:t==null?void 0:t.pageIndex,pageSize:l.PAGESIZE,total:t==null?void 0:t.totalRecords,position:["bottomCenter"],onChange:u=>{d({pageIndex:u,pageSize:l.PAGESIZE})}}:void 0,scroll:{x:1450}})}function ce(){const{getListIncome:o,getListIncomeWithRoleUser:e,getListIncomeWithRoleAdmin:a}=z(),{isAdmin:t}=w(),{formatMessage:d}=j(),[u,g,C]=U(["get-list-income",!0],["get-list-income-with-role-admin",!0],["get-list-income-with-role-user",!0]),r=L(),{data:p,dataRoleAdmin:h,dataRoleUser:E,pagination:c}=D(s=>s.user.income),[m,S]=R.useState("1");R.useEffect(()=>{r(q([{title:{vi_VN:"Nhân sự",en_US:"Personnel"}},{title:{vi_VN:"Thông tin thu nhập",en_US:"Income information"}}]))},[r]),R.useEffect(()=>{if(m==="1"){o({pageIndex:l.PAGEINDEX,pageSize:l.PAGESIZE});return}if(m==="2"){t?a({pageIndex:l.PAGEINDEX,pageSize:l.PAGESIZE}):e({pageIndex:l.PAGEINDEX,pageSize:l.PAGESIZE});return}},[m]);const P=[{key:"1",label:d({id:"title.document.incomeDuringTheYear"}),children:n(ne,{data:p,loading:u,isAdmin:t,pagination:c,getListIncome:o})},{key:"2",label:d({id:"title.document.incomeByPosition"}),children:n(Q,{data:t?h:E,isAdmin:t,loading:t?g:C,pagination:c,getListIncomeWithRoleAdmin:a,getListIncomeWithRoleUser:e})}],b=({textSearch:s,time:I})=>{if(m==="1"){o({pageIndex:(c==null?void 0:c.pageIndex)??l.PAGEINDEX,pageSize:l.PAGESIZE,textSearch:s,time:I});return}if(m==="2"){t?a({pageIndex:(c==null?void 0:c.pageIndex)??l.PAGEINDEX,pageSize:l.PAGESIZE,textSearch:s,time:I}):e({pageIndex:(c==null?void 0:c.pageIndex)??l.PAGEINDEX,pageSize:l.PAGESIZE,textSearch:s,time:I});return}},f=s=>{S(s)};return G("div",{children:[G("div",{style:{display:"flex",alignItems:" center",justifyContent:"space-between"},children:[n("h3",{css:ae,children:d({id:"title.document.inforIncome"})}),t&&n(O,{type:"primary",size:"large",icon:n(M,{}),children:"Import Excel"})]}),t&&n("div",{css:ie,children:n(F,{onSearch:b})}),n(Y,{defaultActiveKey:m,items:P,onChange:f})]})}const ae={name:"vahflk",styles:"font-size:1.8rem;line-height:2rem;font-weight:500;margin-bottom:2.4rem;color:#101828"},ie={name:"gjoxlq",styles:"margin:2.6rem 0"};export{ce as default};
//# sourceMappingURL=index-Cp0vm8Lo.js.map
