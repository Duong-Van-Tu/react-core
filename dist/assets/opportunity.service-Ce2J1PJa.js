import{u as j,a as B,b as L,g as q,c as z,r as d,d as K,cc as N,P as u,e as $,cd as X,f as c,ce as Z,cf as l,cg as F,ch as J,ci as M,cj as Q,ck as V}from"./index-Bakn7Zu-.js";const Y=()=>{const a=j(""),e=B(),p=L(),r=q(),i=z(t=>t.auth.user),w=d.useCallback(async({pageIndex:t=u.PAGEINDEX,pageSize:n=u.PAGESIZE,textSearch:s,statusId:o,time:y=$().year().toString()})=>{const g={PageIndex:t.toString(),PageSize:n.toString(),UserId:i==null?void 0:i.id,RoleId:i==null?void 0:i.applicationRoles[0].id,StatusId:o,Time:`1-1-${y}`,TextSearch:s,tenant:r},O=K(g),{data:S,succeeded:A}=await e(()=>a.post(`/Opportunity/get-list-with-pagination?${O}`),{loadingKey:"get-opportunity"});if(A){const{items:I,totalRecords:f,pageIndex:m,totalPages:P,totalExtend:b}=S;p(N({data:I,pagination:{pageIndex:m,totalRecords:f,totalPages:P},totalExtend:b}))}},[e,a]),x=d.useCallback(async t=>{const{data:n,succeeded:s}=await e(()=>a.get(`/Opportunity/get-by-id/${t}`),{loadingKey:"get-opportunityDetail",messageKey:"opportunityDetail-message"});s&&p(X(n))},[e,a]),k=d.useCallback(async t=>{const n=c({...t}),{data:s,succeeded:o}=await e(()=>a.post(`/Opportunity/add-or-update?tenant=${r}`,[{data:n}]),{loadingKey:"add-opportunity",messageKey:"addOpportunity-message"});return o?(p(Z(s[0])),o):!1},[a,e]),C=d.useCallback(async t=>{const n=c({...t}),{data:s,succeeded:o}=await e(()=>a.post(`/Opportunity/add-or-update?tenant=${r}`,[{id:t.id,data:n}]),{loadingKey:"edit-opportunity",messageKey:"editOpportunity-message"});return o?(p(l(s[0])),o):!1},[a,e]),E=d.useCallback(async t=>{const n=t.join(","),{succeeded:s}=await e(()=>a.del(`/Opportunity/delete-by-ids/${n}/${i==null?void 0:i.id}?tenant=${r}`),{loadingKey:"delete-opportunity"});return s?(p(F(t)),s):!1},[a,e]),h=d.useCallback(async t=>{const n=c(t),{data:s,succeeded:o}=await e(()=>a.put(`/OpportunityStatus/add-or-update?tenant=${r}`,n),{loadingKey:"edit-statusOpportunity"});return o?(p(l(s)),o):!1},[a,e]),D=d.useCallback(async t=>{const n=c(t),{data:s,succeeded:o}=await e(()=>a.put(`/Opportunity/update-status-by-id?tenant=${r}`,n),{loadingKey:"edit-statusOpportunityById"});return o?(p(l(s)),o):!1},[a,e]),U=d.useCallback(async()=>{const{data:t,succeeded:n}=await e(()=>a.get(`/OpportunityStatus/get-all?tenant=${r}`),{loadingKey:"status-opportunity"});n&&p(J(t))},[a,e]),H=d.useCallback(async()=>{const{data:t,succeeded:n}=await e(()=>a.get(`/ApplicationUsers/get-all?tenant=${r}`),{loadingKey:"getAllSaleAndSupplier-opportunity"});n&&p(M(t))},[a,e]),R=d.useCallback(async t=>{const{data:n,succeeded:s}=await e(()=>a.post(`/Opportunity/assign-user?tenant=${r}`,{id:t.id,applicationUserId:t.saleAndSupplierId}),{loadingKey:"assignUser-opportunity"});return s?(p(l(n)),s):!1},[a,e]),T=d.useCallback(async({pageIndex:t=u.PAGEINDEX,pageSize:n=u.PAGESIZE,textSearch:s,statusId:o,time:y=$().year().toString()})=>{const g={PageIndex:t.toString(),PageSize:n.toString(),UserId:i==null?void 0:i.id,RoleId:i==null?void 0:i.applicationRoles[0].id,StatusId:o,Time:`1-1-${y}`,TextSearch:s,tenant:r},O=K(g),{data:S,succeeded:A}=await e(()=>a.post(`/OpportunityHistory/get-list-with-pagination?${O}`),{loadingKey:"get-historyOpportunity"});if(A){const{items:I,totalRecords:f,pageIndex:m,totalPages:P,totalExtend:b}=S;p(Q({data:I,pagination:{pageIndex:m,totalRecords:f,totalPages:P},totalExtend:b}))}},[e,a]),G=d.useCallback(async t=>{const n=c({...t}),{data:s,succeeded:o}=await e(()=>a.post(`/OpportunityHistory/add-or-update?tenant=${r}`,[{data:n}]),{loadingKey:"add-historyOpportunity",messageKey:"addHistoryOpportunity-message"});return o?(p(V(s[0])),o):!1},[a,e]);return{getAllOpportunity:w,addOpportunity:k,updateOpportunity:C,deleteOpportunity:E,updateStatusOpportunity:h,getAllStatusOpportunity:U,getOpportunityById:x,getAllSaleAndSupplier:H,assignSaleAndSupplier:R,updateStatusOpportunityById:D,getAllHistoryOpportunity:T,addHistoryOpportunity:G}};export{Y as u};
//# sourceMappingURL=opportunity.service-Ce2J1PJa.js.map
